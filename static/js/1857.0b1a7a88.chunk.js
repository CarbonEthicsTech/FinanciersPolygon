"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[1857],{21857:function(e,r,t){t.d(r,{CS:function(){return Z},Cw:function(){return g},Yu:function(){return G},j5:function(){return x},lm:function(){return b}});var n=t(74165),o=t(15861),a=t(37762),i=t(42265),l=t(19545),s=t(44055),u=t(76200),f=t(84652),y=t(35995),p=t(78952),c=t(41414),v=t(376),m=t(9014),d=t(49818),h={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function g(e){var r=e.folders||[],t=r.slice(),n=new Map,o=new Map,i=new Map,l=new Map,s=new Map,u={esriGeometryPoint:o,esriGeometryPolyline:i,esriGeometryPolygon:l};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var r=(0,f.d9)(e);r.featureSet.features=[];var t=e.featureSet.geometryType;n.set(t,r);var a=e.layerDefinition.objectIdField;"esriGeometryPoint"===t?S(o,a,e.featureSet.features):"esriGeometryPolyline"===t?S(i,a,e.featureSet.features):"esriGeometryPolygon"===t&&S(l,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){s.set(e.id,e)})),r.forEach((function(r){r.networkLinkIds.forEach((function(n){var o=function(e,r,t){var n=function(e,r){var t;return r.some((function(r){return r.id===e&&(t=r,!0)})),t}(e,t);return n&&(n.parentFolderId=r,n.networkLink=n),n}(n,r.id,e.networkLinks);o&&t.push(o)}))})),t.forEach((function(e){if(e.featureInfos){e.points=(0,f.d9)(n.get("esriGeometryPoint")),e.polylines=(0,f.d9)(n.get("esriGeometryPolyline")),e.polygons=(0,f.d9)(n.get("esriGeometryPolygon")),e.mapImages=[];var r,t=(0,a.Z)(e.featureInfos);try{for(t.s();!(r=t.n()).done;){var o=r.value;switch(o.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var i,l=u[o.type].get(o.id);l&&(null===(i=e[h[o.type]])||void 0===i||i.featureSet.features.push(l));break;case"GroundOverlay":var y=s.get(o.id);y&&e.mapImages.push(y)}}}catch(p){t.e(p)}finally{t.f()}e.fullExtent=b([e])}}));var y=b(t);return{folders:r,sublayers:t,extent:y}}function Z(e,r,t,n){var o=l.id&&l.id.findCredential(e);e=(0,y.fl)(e,{token:o&&o.token});var a=i.Z.kmlServiceUrl;return(0,u.default)(a,{query:{url:e,model:"simple",folders:"",refresh:0!==t||void 0,outSR:JSON.stringify(r)},responseType:"json",signal:n})}function x(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[],a={},i=r.sublayers,l=r.folders.map((function(e){return e.id}));return i.forEach((function(r){var i=new e;if(t?i.read(r,t):i.read(r),n.length&&l.includes(i.id)&&(i.visible=n.includes(i.id)),a[r.id]=i,null!=r.parentFolderId&&-1!==r.parentFolderId){var s,u=a[r.parentFolderId];u.sublayers||(u.sublayers=[]),null===(s=u.sublayers)||void 0===s||s.unshift(i)}else o.unshift(i)})),o}function S(e,r,t){t.forEach((function(t){e.set(t.attributes[r],t)}))}function G(e){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)((0,n.Z)().mark((function e(r){var t,o,i,l,u,f,y,p,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=d.Z.fromJSON(r.featureSet).features,o=r.layerDefinition,i=(0,m.i)(o.drawingInfo.renderer),l=s.Z.fromJSON(r.popupInfo),u=[],f=(0,a.Z)(t),e.prev=2,f.s();case 4:if((y=f.n()).done){e.next=12;break}return p=y.value,e.next=8,i.getSymbolAsync(p);case 8:c=e.sent,p.symbol=c,p.popupTemplate=l,p.visible=!0,u.push(p);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),f.e(e.t0);case 17:return e.prev=17,f.f(),e.finish(17);case 20:return e.abrupt("return",u);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function b(e){var r,t=(0,c.Ue)(c.Gv),n=(0,c.Ue)(c.Gv),o=(0,a.Z)(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.polygons&&i.polygons.featureSet&&i.polygons.featureSet.features){var l,s=(0,a.Z)(i.polygons.featureSet.features);try{for(s.s();!(l=s.n()).done;){var u=l.value;(0,v.Yg)(t,u.geometry),(0,c.TC)(n,t)}}catch(G){s.e(G)}finally{s.f()}}if(i.polylines&&i.polylines.featureSet&&i.polylines.featureSet.features){var f,y=(0,a.Z)(i.polylines.featureSet.features);try{for(y.s();!(f=y.n()).done;){var m=f.value;(0,v.Yg)(t,m.geometry),(0,c.TC)(n,t)}}catch(G){y.e(G)}finally{y.f()}}if(i.points&&i.points.featureSet&&i.points.featureSet.features){var d,h=(0,a.Z)(i.points.featureSet.features);try{for(h.s();!(d=h.n()).done;){var g=d.value;(0,v.Yg)(t,g.geometry),(0,c.TC)(n,t)}}catch(G){h.e(G)}finally{h.f()}}if(i.mapImages){var Z,x=(0,a.Z)(i.mapImages);try{for(x.s();!(Z=x.n()).done;){var S=Z.value;(0,v.Yg)(t,S.extent),(0,c.TC)(n,t)}}catch(G){x.e(G)}finally{x.f()}}}}catch(G){o.e(G)}finally{o.f()}return(0,c.fS)(n,c.Gv)?void 0:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:p.Z.WGS84}}},49818:function(e,r,t){t.d(r,{Z:function(){return k}});var n,o=t(29439),a=t(37762),i=t(15671),l=t(43144),s=t(60136),u=t(29388),f=t(27366),y=t(59486),p=t(52639),c=t(43404),v=t(46784),m=t(84652),d=t(49861),h=(t(25243),t(38511)),g=t(69912),Z=t(31201),x=t(78952),S=t(77981),G=t(83040),w=new c.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),b=n=function(e){(0,s.Z)(t,e);var r=(0,u.Z)(t);function t(e){var n;return(0,i.Z)(this,t),(n=r.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,l.Z)(t,[{key:"readFeatures",value:function(e,r){for(var t=x.Z.fromJSON(r.spatialReference),n=[],o=0;o<e.length;o++){var a=e[o],i=p.Z.fromJSON(a),l=a.geometry&&a.geometry.spatialReference;null==i.geometry||l||(i.geometry.spatialReference=t);var s=a.aggregateGeometries,u=i.aggregateGeometries;if(s&&null!=u)for(var f in u){var y=u[f],c=s[f],v=null===c||void 0===c?void 0:c.spatialReference;null==y||v||(y.spatialReference=t)}n.push(i)}return n}},{key:"writeGeometryType",value:function(e,r,t,n){if(e)w.write(e,r,t,n);else{var o=this.features;if(o){var i,l=(0,a.Z)(o);try{for(l.s();!(i=l.n()).done;){var s=i.value;if(s&&null!=s.geometry)return void w.write(s.geometry.type,r,t,n)}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,r){if(!e)return null;var t=!!e.spatialReference,n=(0,S.im)(e);return n&&!t&&r.spatialReference&&(n.spatialReference=x.Z.fromJSON(r.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,r){if(e)r.spatialReference=e.toJSON();else{var t=this.features;if(t){var n,o=(0,a.Z)(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(i&&null!=i.geometry&&i.geometry.spatialReference)return void(r.spatialReference=i.geometry.spatialReference.toJSON())}}catch(l){o.e(l)}finally{o.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,m.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var r=this.write();if(r.features&&Array.isArray(e)&&e.length>0)for(var t=0;t<r.features.length;t++){var n=r.features[t];if(n.geometry){var o=e&&e[t];n.geometry=o&&o.toJSON()||n.geometry}}return r}},{key:"quantize",value:function(e){for(var r=(0,o.Z)(e.scale,2),t=r[0],n=r[1],a=(0,o.Z)(e.translate,2),i=a[0],l=a[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-i)/t)}),(function(e){return Math.round((l-e)/n)})),f=0,y=s.length;f<y;f++)(null===u||void 0===u?void 0:u(s[f].geometry))||(s.splice(f,1),f--,y--);return this.transform=e,this}},{key:"unquantize",value:function(){var e,r,t=this.geometryType,n=this.features,i=this.transform;if(!i)return this;var l=(0,o.Z)(i.translate,2),s=l[0],u=l[1],f=(0,o.Z)(i.scale,2),y=f[0],p=f[1],c=null,v=null;if(this.hasZ&&null!=(null===i||void 0===i||null===(e=i.scale)||void 0===e?void 0:e[2])){var m=(0,o.Z)(i.translate,3)[2],d=(0,o.Z)(i.scale,3)[2];c=function(e){return e*d+m}}if(this.hasM&&null!=(null===i||void 0===i||null===(r=i.scale)||void 0===r?void 0:r[3])){var h=(0,o.Z)(i.translate,4)[3],g=(0,o.Z)(i.scale,4)[3];v=function(e){return null==e?e:e*g+h}}var Z,x=this._getHydrationFunction(t,(function(e){return e*y+s}),(function(e){return u-e*p}),c,v),S=(0,a.Z)(n);try{for(S.s();!(Z=S.n()).done;){var G=Z.value.geometry;null!=G&&x&&x(G)}}catch(w){S.e(w)}finally{S.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,r,t){for(var n,o,a=[],i=0,l=e.length;i<l;i++){var s=e[i];if(i>0){var u=r(s[0]),f=t(s[1]);u===n&&f===o||(a.push([u-n,f-o]),n=u,o=f)}else n=r(s[0]),o=t(s[1]),a.push([n,o])}return a.length>0?a:null}},{key:"_getQuantizationFunction",value:function(e,r,t){var n=this;return"point"===e?function(e){return e.x=r(e.x),e.y=t(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var o=(0,S.oU)(e)?e.rings:e.paths,a=[],i=0,l=o.length;i<l;i++){var s=o[i],u=n._quantizePoints(s,r,t);u&&a.push(u)}return a.length>0?((0,S.oU)(e)?e.rings=a:e.paths=a,e):null}:"multipoint"===e?function(e){var o=n._quantizePoints(e.points,r,t);return o&&o.length>0?(e.points=o,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,r,t,n,o){return"point"===e?function(e){e.x=r(e.x),e.y=t(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?function(e){for(var a,i,l=(0,S.oU)(e)?e.rings:e.paths,s=0,u=l.length;s<u;s++)for(var f=l[s],y=0,p=f.length;y<p;y++){var c=f[y];y>0?(a+=c[0],i+=c[1]):(a=c[0],i=c[1]),c[0]=r(a),c[1]=t(i)}if(n&&o)for(var v=0,m=l.length;v<m;v++)for(var d=l[v],h=0,g=d.length;h<g;h++){var Z=d[h];Z[2]=n(Z[2]),Z[3]=o(Z[3])}else if(n)for(var x=0,G=l.length;x<G;x++)for(var w=l[x],b=0,k=w.length;b<k;b++){var P=w[b];P[2]=n(P[2])}else if(o)for(var _=0,R=l.length;_<R;_++)for(var C=l[_],T=0,z=C.length;T<z;T++){var F=C[T];F[2]=o(F[2])}}:"extent"===e?function(e){e.xmin=r(e.xmin),e.ymin=t(e.ymin),e.xmax=r(e.xmax),e.ymax=t(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),o&&null!=e.mmax&&null!=e.mmin&&(e.mmax=o(e.mmax),e.mmin=o(e.mmin))}:"multipoint"===e?function(e){for(var a,i,l=e.points,s=0,u=l.length;s<u;s++){var f=l[s];s>0?(a+=f[0],i+=f[1]):(a=f[0],i=f[1]),f[0]=r(a),f[1]=t(i)}if(n&&o)for(var y=0,p=l.length;y<p;y++){var c=l[y];c[2]=n(c[2]),c[3]=o(c[3])}else if(n)for(var v=0,m=l.length;v<m;v++){var d=l[v];d[2]=n(d[2])}else if(o)for(var h=0,g=l.length;h<g;h++){var Z=l[h];Z[2]=o(Z[2])}}:null}}]),t}(v.wq);(0,f._)([(0,d.Cb)({type:String,json:{write:!0}})],b.prototype,"displayFieldName",void 0),(0,f._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"exceededTransferLimit",void 0),(0,f._)([(0,d.Cb)({type:[p.Z],json:{write:!0}})],b.prototype,"features",void 0),(0,f._)([(0,h.r)("features")],b.prototype,"readFeatures",null),(0,f._)([(0,d.Cb)({type:[G.Z],json:{write:!0}})],b.prototype,"fields",void 0),(0,f._)([(0,d.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:w.read}}})],b.prototype,"geometryType",void 0),(0,f._)([(0,Z.c)("geometryType")],b.prototype,"writeGeometryType",null),(0,f._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasM",void 0),(0,f._)([(0,d.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],b.prototype,"hasZ",void 0),(0,f._)([(0,d.Cb)({types:y.qM,json:{write:!0}})],b.prototype,"queryGeometry",void 0),(0,f._)([(0,h.r)("queryGeometry")],b.prototype,"readQueryGeometry",null),(0,f._)([(0,d.Cb)({type:x.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),(0,f._)([(0,Z.c)("spatialReference")],b.prototype,"writeSpatialReference",null),(0,f._)([(0,d.Cb)({json:{write:!0}})],b.prototype,"transform",void 0),(b=n=(0,f._)([(0,g.j)("esri.rest.support.FeatureSet")],b)).prototype.toJSON.isDefaultToJSON=!0;var k=b}}]);
//# sourceMappingURL=1857.0b1a7a88.chunk.js.map