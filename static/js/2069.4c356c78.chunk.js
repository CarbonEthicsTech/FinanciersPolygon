"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[2069],{27811:function(t,r,n){n.d(r,{AJ:function(){return h},If:function(){return v},QM:function(){return y},hy:function(){return l},k0:function(){return c},nu:function(){return f},uI:function(){return d},wx:function(){return p}});var e=n(37762),a=n(16889),i=n(17842),u=n(90045),o=n(67077),f=2.4;function c(t){return(0,i.Wz)(t*f)}function h(t){return(0,i.F2)(t)/f}function s(t,r,n,e){var i=r.color,o=r.ratio,f=n.color,c=n.ratio;if(c===o){var h=1e-6;1===c?o-=h:c+=h}var s=(0,a.uZ)((e-o)/(c-o),0,1);(0,u.l)(t,i.toArray(),f.toArray(),s)}function d(t){var r=new Uint8ClampedArray(2048);if(t=t.filter((function(t){var r=t.ratio;return r>=0&&r<=1})).sort((function(t,r){return t.ratio-r.ratio})).map((function(t){var r=t.color,n=t.ratio;return{color:r,ratio:Math.max(n,.001)}})),t.length<1)return r;for(var n=t[0],e=t[0],a=1,i=(0,o.c)(),u=0;u<512;u++){for(var f=(u+.5)/512;f>e.ratio&&a<t.length;)n=e,e=t[a++];s(i,n,e,f),r.set(i,4*u)}return r}function y(t,r,n,a){var u,o,f=r.radius,c=r.fieldOffset,h=r.field,s=Math.round((0,i.F2)(f)),d=new Float64Array(n*a),y=Number.NEGATIVE_INFINITY,l=function(t,r){return null!=t?"string"==typeof r?function(r){return-1*+r.readAttribute(t)}:function(n){return+n.readAttribute(t)+r}:function(t){return 1}}(h,c),p=new Set,g=(0,e.Z)(t);try{for(g.s();!(o=g.n()).done;)for(var m=o.value.getCursor();m.next();){var w=m.getObjectId();if(!p.has(w)){p.add(w);var b=m.readLegacyPointGeometry(),M=128;if(!(b.x<-M||b.x>=n+M||b.y<-M||b.y>a+M))for(var _=+l(m),C=Math.max(0,Math.round(b.x)-s),k=Math.max(0,Math.round(b.y)-s),A=Math.min(a,Math.round(b.y)+s),Z=Math.min(n,Math.round(b.x)+s),x=k;x<A;x++)for(var I=C;I<Z;I++){var U=x*n+I,D=v(b.x-I,b.y-x,s);(u=d[U]+=D*_)>y&&(y=u)}}}}catch(q){g.e(q)}finally{g.f()}return{matrix:d.buffer,max:y}}function l(t,r,n,e,i,u){t.canvas.width=t.canvas.height=r,t.clearRect(0,0,r,r);var o=t.getImageData(0,0,r,r);n&&e&&o.data.set(new Uint8ClampedArray(function(t,r,n,e,i){for(var u=new Uint32Array(t*t),o=("buffer"in r?r:new Float64Array(r)),f=("buffer"in n?new Uint32Array(n.buffer):new Uint32Array(new Uint8Array(n).buffer)),c=f.length/(i-e),h=0;h<o.length;h++){var s=o[h],d=Math.floor((s-e)*c);u[h]=f[(0,a.uZ)(d,0,f.length-1)]}return u.buffer}(r,n,e,i,u))),t.putImageData(o,0,0)}function v(t,r,n){var e=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))/n;return e>1?0:3/(Math.PI*Math.pow(n,2))*Math.pow(1-Math.pow(e,2),2)}function p(t,r){return"function"==typeof t?t:t?"string"==typeof r?function(r){return-1*+r[t]}:function(n){return+n[t]+r}:function(){return 1}}},52662:function(t,r,n){n.r(r),n.d(r,{default:function(){return w}});var e=n(74165),a=n(15861),i=n(15671),u=n(43144),o=n(60136),f=n(29388),c=n(27366),h=n(32718),s=n(66978),d=n(49861),y=(n(25243),n(63780),n(93169),n(69912)),l=n(90110),v=n(95986),p=n(9229),g=n(67581),m=function(t){(0,o.Z)(n,t);var r=(0,f.Z)(n);function n(){return(0,i.Z)(this,n),r.apply(this,arguments)}return(0,u.Z)(n,[{key:"update",value:function(t){var r=this;this._strategy.update(t).catch((function(t){(0,s.D_)(t)||h.Z.getLogger(r).error(t)})),this.notifyChange("updating")}},{key:"attach",value:function(){this._bitmapContainer=new l.c,this.container.addChild(this._bitmapContainer),this._strategy=new p.Z({container:this._bitmapContainer,fetchSource:this.fetchBitmapData.bind(this),requestUpdate:this.requestUpdate.bind(this)})}},{key:"detach",value:function(){this._strategy.destroy(),this._strategy=null,this.container.removeChild(this._bitmapContainer),this._bitmapContainer.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"fetchBitmapData",value:function(t,r,n){return this.layer.fetchImageBitmap(t,r,n)}},{key:"doRefresh",value:function(){var t=(0,a.Z)((0,e.Z)().mark((function t(){return(0,e.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.requestUpdate();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this._strategy.updating||this.updateRequested}}]),n}((0,n(13107).Z)((0,v.y)(g.Z)));(0,c._)([(0,d.Cb)()],m.prototype,"_strategy",void 0),(0,c._)([(0,d.Cb)()],m.prototype,"updating",void 0);var w=m=(0,c._)([(0,y.j)("esri.views.2d.layers.BaseDynamicLayerView2D")],m)}}]);
//# sourceMappingURL=2069.4c356c78.chunk.js.map