"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[6571],{16054:function(e,t,r){r.d(t,{z:function(){return o}});var i=r(15671),n=r(43144),s=r(18759),o=function(){function e(t,r){(0,i.Z)(this,e),this._storage=new s.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,n.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return c},Xq:function(){return p}});var i,n,s=r(29439),o=r(37762),a=r(15671),u=r(43144),l=r(27546);(n=i||(i={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";var p=function(){function e(t,r,i){(0,a.Z)(this,e),this.name=t,this._storage=r,this.id=d+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}return(0,u.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,i)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,a.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}return(0,u.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,n,s){t=e.id+t;var o=this._db.get(t);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(t),o.entry!==r&&this._notifyRemove(t,o.entry,i.ALL)),n>this._maxSize)this._notifyRemove(t,r,i.ALL);else if(void 0!==r)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(s,-3)- -3;this._db.set(t,{entry:r,size:n,lifetime:a,lives:a}),this._size+=n,e.size+=n,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,n){t=e.id+t;var s=this._db.get(t);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){var o=this._notifyRemove(t,r,i.SOME);if(!(null!=o&&o>0))return void this._db.delete(t);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((function(t,n){var s=t.lifetime;i[s]=(i[s]||0)+t.size,e._users.forAll((function(e){var i=e.id,s=e.name;if(n.startsWith(i)){var o=r[s]||0;r[s]=o+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var i=r[t]||0;r[t]=i,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var s=Object.keys(r);s.sort((function(e,t){return r[t]-r[e]})),s.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+n[e]}));for(var o=i.length-1;o>=0;--o){var a=i[o];a&&(t["Priority "+(o+-3-1)]=Math.round(a/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,n){n.startsWith(r)&&(t._size-=e.size,t._db.delete(n),t._notifyRemove(n,e.entry,i.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,i.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var i;return this._removeFuncs.some((function(n){if(e.startsWith(n[0])){var s=n[1](t,r);return"number"==typeof s&&(i=s),!0}return!1})),i}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,o.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var i=(0,s.Z)(t.value,2),n=i[0],a=i[1];if(this._purgeItem(n,a),this._size<=.9*this.maxSize)return}}catch(u){r.e(u)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,i=(0,o.Z)(e._db);try{for(i.s();!(r=i.n()).done;){var n=(0,s.Z)(r.value,2),a=n[0],l=n[1];if(a.startsWith(t.id)&&(e._purgeItem(a,l,t),t.size<=.9*t.maxSize))return}}catch(u){i.e(u)}finally{i.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var n=this._notifyRemove(e,t.entry,i.SOME);null!=n&&n>0&&(this._size+=n,r&&(r.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),d=0},50255:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ee}});var i=r(37762),n=r(74165),s=r(15861),o=r(1413),a=r(15671),u=r(43144),l=r(11752),p=r(61120),c=r(60136),d=r(29388),y=r(27366),h=r(40281),f=r(10064),v=r(41691),b=r(93002),m=r(97642),g=r(66978),_=r(94172),w=r(76672),k=r(35995),C=r(49861),Z=(r(25243),r(63780),r(93169),r(38511)),S=r(69912),x=r(25265),F=r(30651),I=r(27961),A=r(11936),z=r(6693),O=r(46671),R=r(56601),E=r(32526),T=r(6061),j=r(29598),L=r(71684),M=r(56811),P=r(99063),Q=r(25899),D=r(45948),q=r(62594),G=r(25610),U=r(37270),V=r(46784),H=r(31201),N=r(66591),B=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).code=null,e.defaultValues={},e.domains=null,e.name=null,e}return(0,u.Z)(r,[{key:"readDomains",value:function(e){if(!e)return null;for(var t={},r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];t[n]=(0,N.im)(e[n])}return t}},{key:"writeDomains",value:function(e,t){if(e){for(var r={},i=0,n=Object.keys(e);i<n.length;i++){var s,o=n[i];e[o]&&(r[o]=null===(s=e[o])||void 0===s?void 0:s.toJSON())}t.domains=r}}}]),r}(V.wq);(0,y._)([(0,C.Cb)({type:Number,json:{write:!0}})],B.prototype,"code",void 0),(0,y._)([(0,C.Cb)({type:Object,json:{write:!0}})],B.prototype,"defaultValues",void 0),(0,y._)([(0,C.Cb)({json:{write:!0}})],B.prototype,"domains",void 0),(0,y._)([(0,Z.r)("domains")],B.prototype,"readDomains",null),(0,y._)([(0,H.c)("domains")],B.prototype,"writeDomains",null),(0,y._)([(0,C.Cb)({type:String,json:{write:!0}})],B.prototype,"name",void 0);var W=B=(0,y._)([(0,S.j)("esri.layers.support.Subtype")],B),K=r(44055),J=r(94931),Y=(r(78451),r(98689),r(57823),r(32066),r(30505)),X=r(34999),$=r(28189),ee=(r(9014),r(79056)),te=r(84652),re=r(54472),ie=r(32718),ne=r(18202),se=r(47492),oe=r(40743),ae=r(12224),ue=r(77748),le=r(85116),pe=r(21149),ce=r(81085),de=r(61574),ye=["charts","editingEnabled","formTemplate","labelsVisible","labelingInfo","legendEnabled","minScale","maxScale","opacity","popupEnabled","popupTemplate","renderer","subtypeCode","templates","title","visible"],he={key:"type",base:Y.Z,errorContext:"renderer",typeMap:{simple:X.Z,"unique-value":$.Z,"class-breaks":J.Z}},fe=(0,G.v)(),ve=(0,se.d)({types:he}),be=0;function me(e){var t=e.json.write;return"object"==typeof t?t.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function ge(e){switch(e){case"point":case"multipoint":return de.xA.clone();case"polyline":return de.CJ.clone();case"polygon":case"multipatch":return de.z3.clone();default:return null}}function _e(e,t){var r;return null==e?null:null===(r=t.subtypes)||void 0===r?void 0:r.find((function(t){return t.code===e}))}function we(e,t){var r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:t.type,r=null}var i={},n=_e(e,t);if(null!=n){var s=n.defaultValues;for(var o in s)i[o]=s[o]}return i[t.subtypeField]=e,new ae.Z({name:"New Feature",drawingTool:r,prototype:{attributes:i}})}var ke="esri.layers.support.SubtypeSublayer",Ce=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){var i;return(0,a.Z)(this,r),(i=t.call(this,e)).charts=null,i.editingEnabled=!0,i.fieldOverrides=null,i.fieldsIndex=null,i.formTemplate=null,i.id="".concat(Date.now().toString(16),"-subtype-sublayer-").concat(be++),i.type="subtype-sublayer",i.labelsVisible=!0,i.labelingInfo=null,i.layerType="ArcGISFeatureLayer",i.legendEnabled=!0,i.listMode="show",i.minScale=0,i.maxScale=0,i.opacity=1,i.parent=null,i.popupEnabled=!0,i.popupTemplate=null,i.subtypeCode=null,i.templates=null,i.title=null,i.visible=!0,i}return(0,u.Z)(r,[{key:"capabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}},{key:"effectiveCapabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}},{key:"effectiveEditingEnabled",get:function(){var e=this.parent;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}},{key:"elevationInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.elevationInfo}},{key:"writeFieldOverrides",value:function(e,t,r){var i,n,s=this.fields,o=this.parent;if(s){n=[];var a=0;s.forEach((function(e){var t,r=e.name,i=e.alias,s=e.editable;if(e.visible){var u=null===o||void 0===o||null===(t=o.fields)||void 0===t?void 0:t.find((function(e){return e.name===r}));if(u){var l={name:r},p=!1;i!==u.alias&&(l.alias=i,p=!0),s!==u.editable&&(l.editable=s,p=!0),n.push(l),p&&a++}}})),0===a&&n.length===s.length&&(n=null)}else n=(0,te.d9)(e);(null===(i=n)||void 0===i?void 0:i.length)&&(0,ne.RB)(r,n,t)}},{key:"fields",get:function(){var e=this.parent,t=this.fieldOverrides,r=this.subtypeCode,n=null===e||void 0===e?void 0:e.fields;if(!e||null===n||void 0===n||!n.length)return null;var s,o=e.subtypes,a=e.subtypeField,u=null===o||void 0===o?void 0:o.find((function(e){return e.code===r})),l=null===u||void 0===u?void 0:u.defaultValues,p=null===u||void 0===u?void 0:u.domains,c=[],d=(0,i.Z)(n);try{var y=function(){var e,i,n=s.value.clone(),o=n.name,u=null===t||void 0===t?void 0:t.find((function(e){return e.name===o}));if(n.visible=!t||!!u,u){var d=u.alias,y=u.editable;d&&(n.alias=d),!1===y&&(n.editable=!1)}var h=null!==(e=null===l||void 0===l?void 0:l[o])&&void 0!==e?e:null;n.defaultValue=o===a?r:h;var f=null!==(i=null===p||void 0===p?void 0:p[o])&&void 0!==i?i:null;n.domain=o===a?null:f?"inherited"===f.type?n.domain:f.clone():null,c.push(n)};for(d.s();!(s=d.n()).done;)y()}catch(h){d.e(h)}finally{d.f()}return c}},{key:"floorInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.floorInfo}},{key:"geometryType",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"objectIdField",get:function(){var e;return this.parent||ie.Z.getLogger(ke).error(Se("objectIdField")),null===(e=this.parent)||void 0===e?void 0:e.objectIdField}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",get:function(){if(this._isOverridden("renderer"))return this._get("renderer");var e=this.parent;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new X.Z({symbol:ge(e)})}(e.geometryType):null},set:function(e){(0,U.YN)(e,this.fieldsIndex),this._override("renderer",e)}},{key:"readRendererFromService",value:function(e,t,r){var i,n;if("Table"===t.type)return null;var s,o=null===(i=t.drawingInfo)||void 0===i?void 0:i.renderer,a=ve(o,t,r),u=this.subtypeCode;if(null!=u&&function(e,t){return!!t&&"unique-value"===(null===e||void 0===e?void 0:e.type)&&"string"==typeof e.field&&e.field.toLowerCase()===t.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(a,t.subtypeField)){var l,p=null===(l=a.uniqueValueInfos)||void 0===l?void 0:l.find((function(e){var t=e.value;return(t="number"==typeof t?String(t):t)===String(u)}));p&&(s=new X.Z({symbol:p.symbol}))}else"simple"!==(null===a||void 0===a?void 0:a.type)||(null===(n=a.visualVariables)||void 0===n?void 0:n.length)||(s=a);return s}},{key:"readRenderer",value:function(e,t,r){var i,n,s=null===t||void 0===t||null===(i=t.layerDefinition)||void 0===i||null===(i=i.drawingInfo)||void 0===i?void 0:i.renderer;if(s){var o=null===(n=s.visualVariables)||void 0===n?void 0:n.some((function(e){return"rotationInfo"!==e.type}));return o?void 0:ve(s,t,r)||void 0}}},{key:"spatialReference",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.spatialReference}},{key:"readTemplatesFromService",value:function(e,t){return[we(this.subtypeCode,t)]}},{key:"readTitleFromService",value:function(e,t){var r=_e(this.subtypeCode,t);return null!=r?r.name:null}},{key:"url",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.url}},{key:"userHasUpdateItemPrivileges",get:function(){var e;return!(null===(e=this.parent)||void 0===e||!e.userHasUpdateItemPrivileges)}},{key:"addAttachment",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.parent){e.next=3;break}throw Se("addAttachment");case 3:if(t.getAttribute(i.subtypeField)===this.subtypeCode){e.next=5;break}throw new f.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",i.addAttachment(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r,i){var s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.parent){e.next=3;break}throw Se("updateAttachment");case 3:if(t.getAttribute(s.subtypeField)===this.subtypeCode){e.next=5;break}throw new f.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",s.updateAttachment(t,r,i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"deleteAttachments",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=this.parent){e.next=3;break}throw Se("deleteAttachments");case 3:if(t.getAttribute(i.subtypeField)===this.subtypeCode){e.next=5;break}throw new f.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",i.deleteAttachments(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parent){e.next=2;break}throw Se("applyEdits");case 2:return e.abrupt("return",this.parent.applyEdits(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createPopupTemplate",value:function(e){var t=this,r=this.parent,i=this.fields,n=this.title;r&&(t={displayField:r.displayField,editFieldsInfo:r.editFieldsInfo,fields:i,objectIdField:r.objectIdField,title:n});return(0,ce.eZ)(t,e)}},{key:"createQuery",value:function(){if(!this.parent)throw Se("createQuery");var e=(0,q.rP)(this.parent),t="".concat(this.parent.subtypeField,"=").concat(this.subtypeCode);return e.where=(0,w._)(t,this.parent.definitionExpression),e}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e){return this._getLayerDomain(e)}},{key:"hasUserOverrides",value:function(){var e=this;return ye.some((function(t){return e.originIdOf(t)===x.s3.USER}))}},{key:"queryAttachments",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((i=e.sent).parent){e.next=5;break}throw Se("queryAttachments");case 5:return s=t.clone(),e.abrupt("return",(s.where=Ze(s.where,i.parent.subtypeField,i.subtypeCode),i.parent.queryAttachments(t,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var i,s,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((s=e.sent).parent){e.next=5;break}throw Se("queryFeatures");case 5:return o=null!==(i=pe.Z.from(t))&&void 0!==i?i:s.createQuery(),e.abrupt("return",(null!=t&&(o.where=Ze(o.where,s.parent.subtypeField,s.subtypeCode)),s.parent.queryFeatures(o,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),r}((0,v.p)((0,m.R)((0,ee.IG)(re.Z))));(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"capabilities",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"effectiveCapabilities",null),(0,y._)([(0,C.Cb)({json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"charts",void 0),(0,y._)([(0,C.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],Ce.prototype,"editingEnabled",void 0),(0,y._)([(0,C.Cb)({type:Boolean,readOnly:!0})],Ce.prototype,"effectiveEditingEnabled",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"elevationInfo",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],Ce.prototype,"fieldOverrides",void 0),(0,y._)([(0,H.c)("fieldOverrides")],Ce.prototype,"writeFieldOverrides",null),(0,y._)([(0,C.Cb)((0,o.Z)((0,o.Z)({},fe.fields),{},{readOnly:!0,json:{read:!1}}))],Ce.prototype,"fields",null),(0,y._)([(0,C.Cb)(fe.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"floorInfo",null),(0,y._)([(0,C.Cb)({type:oe.Z,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],Ce.prototype,"formTemplate",void 0),(0,y._)([(0,C.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],Ce.prototype,"id",void 0),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"geometryType",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"type",void 0),(0,y._)([(0,C.Cb)(me((0,te.d9)(D.iR)))],Ce.prototype,"labelsVisible",void 0),(0,y._)([(0,C.Cb)({type:[ue.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:le.r},write:{ignoreOrigin:!0}}})],Ce.prototype,"labelingInfo",void 0),(0,y._)([(0,C.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Ce.prototype,"layerType",void 0),(0,y._)([(0,C.Cb)(me((0,te.d9)(D.rn)))],Ce.prototype,"legendEnabled",void 0),(0,y._)([(0,C.Cb)({type:["show","hide"]})],Ce.prototype,"listMode",void 0),(0,y._)([(0,C.Cb)(function(){var e=(0,te.d9)(D.rO);return e.json.origins.service.read=!1,me(e)}())],Ce.prototype,"minScale",void 0),(0,y._)([(0,C.Cb)(function(){var e=(0,te.d9)(D.u1);return e.json.origins.service.read=!1,me(e)}())],Ce.prototype,"maxScale",void 0),(0,y._)([(0,C.Cb)({readOnly:!0})],Ce.prototype,"effectiveScaleRange",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"objectIdField",null),(0,y._)([(0,C.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"opacity",void 0),(0,y._)([(0,C.Cb)()],Ce.prototype,"parent",void 0),(0,y._)([(0,C.Cb)(me((0,te.d9)(D.C_)))],Ce.prototype,"popupEnabled",void 0),(0,y._)([(0,C.Cb)({type:K.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],Ce.prototype,"popupTemplate",void 0),(0,y._)([(0,C.Cb)({readOnly:!0})],Ce.prototype,"defaultPopupTemplate",null),(0,y._)([(0,C.Cb)({types:he,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],Ce.prototype,"renderer",null),(0,y._)([(0,Z.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],Ce.prototype,"readRendererFromService",null),(0,y._)([(0,Z.r)("renderer",["layerDefinition.drawingInfo.renderer"])],Ce.prototype,"readRenderer",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"spatialReference",null),(0,y._)([(0,C.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],Ce.prototype,"subtypeCode",void 0),(0,y._)([(0,C.Cb)({type:[ae.Z],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],Ce.prototype,"templates",void 0),(0,y._)([(0,Z.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],Ce.prototype,"readTemplatesFromService",null),(0,y._)([(0,C.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"title",void 0),(0,y._)([(0,Z.r)("service","title",["subtypes"])],Ce.prototype,"readTitleFromService",null),(0,y._)([(0,C.Cb)({readOnly:!0,json:{read:!1}})],Ce.prototype,"url",null),(0,y._)([(0,C.Cb)({readOnly:!0})],Ce.prototype,"userHasUpdateItemPrivileges",null),(0,y._)([(0,C.Cb)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],Ce.prototype,"visible",void 0),Ce=(0,y._)([(0,S.j)(ke)],Ce);var Ze=function(e,t,r){var i=new RegExp("".concat(t,"\\s*=\\s*\\d+")),n="".concat(t,"=").concat(r),s=null!==e&&void 0!==e?e:"";return i.test(s)?s.replace(i,n):(0,w._)(n,s)},Se=function(e){return new f.Z("This sublayer must have a parent SubtypeGroupLayer in order to use ".concat(e))},xe=Ce,Fe=r(57370),Ie=r(26704),Ae="SubtypeGroupLayer";function ze(e,t){return new f.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}var Oe=(0,G.v)(),Re=function(e){(0,c.Z)(y,e);var t=(0,d.Z)(y);function y(){var e;(0,a.Z)(this,y);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i)))._sublayersCollectionChanged=!1,e._sublayerLookup=new Map,e.fields=null,e.fieldsIndex=null,e.outFields=null,e.subtypes=null,e.sublayers=new(h.Z.ofType(xe)),e.timeInfo=null,e.title="Layer",e.type="subtype-group",e.addHandles((0,_.YP)((function(){return e.sublayers}),(function(t,r){return e._handleSublayersChange(t,r)}),_.Z_)),e}return(0,u.Z)(y,[{key:"destroy",value:function(){var e;null===(e=this.source)||void 0===e||e.destroy()}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null,i=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(g.r9).then((0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url){e.next=2;break}throw new f.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");case 2:if(null!=t.layerId){e.next=4;break}throw new f.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");case 4:return e.t0=t,e.next=7,t.createGraphicsSource(r);case 7:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e)})))).then((function(){return t._setUserPrivileges(t.serviceItemId,e)})).then((function(){return(0,q.nU)(t,e)}));return this.addResolvingPromise(i),Promise.resolve(this)}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}},{key:"effectiveEditingEnabled",get:function(){return(0,q.sX)(this)}},{key:"parsedUrl",get:function(){var e=(0,k.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,k.v_)(e.path,this.layerId.toString())),e}},{key:"source",set:function(e){this._get("source")!==e&&this._set("source",e)}},{key:"readTitleFromService",value:function(e,t){var r=t.name;return this.url?(0,Q.a7)(this.url,r):r}},{key:"addAttachment",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.JD)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Y5)(this,t,r,i,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Jj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,l.Z)((0,p.Z)(y.prototype),"on",this).call(this,e,t)}},{key:"createGraphicsSource",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var i,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.Hl)(Promise.all([r.e(3406),r.e(7607),r.e(7946),r.e(9623),r.e(9887),r.e(8734),r.e(1220)]).then(r.bind(r,68734)),t);case 2:return i=e.sent,s=i.default,e.abrupt("return",new s({layer:this}).load({signal:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=(0,q.rP)(this),t=this.sublayers.map((function(e){return e.subtypeCode}));return e.where=(0,w._)("".concat(this.subtypeField," IN (").concat(t.join(","),")"),this.definitionExpression),e}},{key:"deleteAttachments",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.FV)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Ci)(this,t,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findSublayerForFeature",value:function(e){var t=this.fieldsIndex.get(this.subtypeField),r=e.attributes[t.name];return this.findSublayerForSubtypeCode(r)}},{key:"findSublayerForSubtypeCode",value:function(e){return this._sublayerLookup.get(e)}},{key:"getFieldDomain",value:function(e,t){return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"loadAll",value:function(){var e=this;return(0,b.G)(this,(function(t){t(e.sublayers)}))}},{key:"queryAttachments",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.SU)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){var s,o,a,u,l,p,c,d,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return a=e.sent,u=null!==(s=pe.Z.from(t))&&void 0!==s?s:a.createQuery(),(l=null!==(o=u.outFields)&&void 0!==o?o:[]).includes(this.subtypeField)||(l.push(this.subtypeField),u.outFields=l),e.next=8,a.source.queryFeatures(u,r);case 8:if(null!==(p=e.sent)&&void 0!==p&&p.features){c=(0,i.Z)(p.features);try{for(c.s();!(d=c.n()).done;)(y=d.value).layer=y.sourceLayer=this.findSublayerForFeature(y)}catch(n){c.e(n)}finally{c.f()}}return e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.tD)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.VG)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.KE)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.kp)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.C9)(this,t,r,Ae));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"write",value:function(e,t){var r,i=t.origin,n=t.layerContainerType,s=t.messages;if(this.isTable){if("web-scene"===i||"web-map"===i&&"tables"!==n)return null!==s&&void 0!==s&&s.push(ze(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===i&&"tables"===n)return null!==s&&void 0!==s&&s.push(ze(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(r=this.sublayers)&&void 0!==r&&r.length?(0,l.Z)((0,p.Z)(y.prototype),"write",this).call(this,e,t):(null!==s&&void 0!==s&&s.push(new f.Z("web-document-write:invalid-property","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer"),{layer:this})),null)}},{key:"serviceSupportsSpatialReference",value:function(e){return!!this.loaded&&(0,Ie.D)(this,e)}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_initLayerProperties",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._set("source",t),(i=t.sourceJSON)&&(this.sourceJSON=i,this.read(i,{origin:"service",url:this.parsedUrl})),!this.isTable){e.next=4;break}throw new f.Z("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");case 4:if(null!==(r=this.subtypes)&&void 0!==r&&r.length){e.next=6;break}throw new f.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");case 6:this._verifyFields(),(0,U.UF)(this.timeInfo,this.fieldsIndex);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=(0,s.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.gG)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e,t,r,i=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+i+")"),this.isTable||-1!==i.search(/\/FeatureServer\//i)||(null===(r=this.fields)||void 0===r?void 0:r.some((function(e){return"geometry"===e.type})))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+i+")")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null})),this.handles.remove("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((function(e){e.parent=r,r._sublayerLookup.set(e.subtypeCode,e)})),this._sublayersCollectionChanged=!1,this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,r._sublayerLookup.set(t.subtypeCode,t)})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,r._sublayerLookup.delete(t.subtypeCode)})),e.on("after-changes",(function(){r._sublayersCollectionChanged=!0}))],"sublayers-owner"))}}]),y}((0,E.B)((0,R.o1)((0,z.h)((0,P.n)((0,M.M)((0,L.Q)((0,A.Y)((0,T.q)((0,j.I)((0,m.R)((0,O.N)((0,I.V)((0,v.p)(F.Z))))))))))))));(0,y._)([(0,C.Cb)({readOnly:!0})],Re.prototype,"createQueryVersion",null),(0,y._)([(0,C.Cb)({readOnly:!0})],Re.prototype,"editingEnabled",null),(0,y._)([(0,C.Cb)({readOnly:!0})],Re.prototype,"effectiveEditingEnabled",null),(0,y._)([(0,C.Cb)((0,o.Z)((0,o.Z)({},Oe.fields),{},{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],Re.prototype,"fields",void 0),(0,y._)([(0,C.Cb)(Oe.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),(0,y._)([(0,C.Cb)(D.id)],Re.prototype,"id",void 0),(0,y._)([(0,C.Cb)({type:["show","hide","hide-children"]})],Re.prototype,"listMode",void 0),(0,y._)([(0,C.Cb)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"]})],Re.prototype,"operationalLayerType",void 0),(0,y._)([(0,C.Cb)(Oe.outFields)],Re.prototype,"outFields",void 0),(0,y._)([(0,C.Cb)({readOnly:!0})],Re.prototype,"parsedUrl",null),(0,y._)([(0,C.Cb)()],Re.prototype,"source",null),(0,y._)([(0,C.Cb)({type:[W],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Re.prototype,"subtypes",void 0),(0,y._)([(0,C.Cb)({type:h.Z.ofType(xe),json:{origins:{service:{read:{source:"subtypes",reader:function(e,t,r){var i=e.map((function(e){var i=e.code,n=new xe({subtypeCode:i});return n.read(t,r),n}));return new(h.Z.ofType(xe))(i)}}}},name:"layers",write:{overridePolicy:function(e,t,r){var i=this.originOf("sublayers"),n=x.s3.PORTAL_ITEM,s=!0;if((0,x.M9)(i)===n&&(0,x.M9)(r.origin)>n){var o=e.some((function(e){return e.hasUserOverrides()}));s=this._sublayersCollectionChanged||o}return{enabled:s,ignoreOrigin:!0}}}}})],Re.prototype,"sublayers",void 0),(0,y._)([(0,C.Cb)({type:Fe.Z})],Re.prototype,"timeInfo",void 0),(0,y._)([(0,C.Cb)({json:{origins:{"portal-item":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Re.prototype,"title",void 0),(0,y._)([(0,Z.r)("service","title",["name"])],Re.prototype,"readTitleFromService",null),(0,y._)([(0,C.Cb)({json:{read:!1}})],Re.prototype,"type",void 0);var Ee=Re=(0,y._)([(0,S.j)("esri.layers.SubtypeGroupLayer")],Re)},27961:function(e,t,r){r.d(t,{V:function(){return p}});var i=r(15671),n=r(43144),s=r(60136),o=r(29388),a=r(27366),u=r(49861),l=(r(25243),r(63780),r(93169),r(69912));var p=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return(0,a._)([(0,u.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,a._)([(0,l.j)("esri.layers.mixins.APIKeyMixin")],t)}},11936:function(e,t,r){r.d(t,{Y:function(){return d}});var i=r(15671),n=r(43144),s=r(60136),o=r(29388),a=r(27366),u=r(32718),l=r(49861),p=(r(25243),r(63780),r(93169),r(69912)),c=r(25899),d=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,c.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,c.Nm)(e,u.Z.getLogger(this)))}}]),r}(e);return(0,a._)([(0,l.Cb)()],t.prototype,"title",null),(0,a._)([(0,l.Cb)({type:String})],t.prototype,"url",null),t=(0,a._)([(0,p.j)("esri.layers.mixins.ArcGISService")],t)}},71065:function(e,t,r){r.d(t,{Z:function(){return h}});var i,n=r(15671),s=r(43144),o=r(60136),a=r(29388),u=r(27366),l=r(40281),p=r(46784),c=r(49861),d=(r(25243),r(63780),r(93169),r(69912)),y=i=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).floorField=null,i.viewAllMode=!1,i.viewAllLevelIds=new l.Z,i}return(0,s.Z)(r,[{key:"clone",value:function(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(p.wq);(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"floorField",void 0),(0,u._)([(0,c.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),(0,u._)([(0,c.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0);var h=y=i=(0,u._)([(0,d.j)("esri.layers.support.LayerFloorInfo")],y)},94582:function(e,t,r){r.d(t,{h:function(){return c}});var i=r(93169),n=r(25899),s={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function o(e,t,r){return!!u(e,t,r)}function a(e,t,r){return u(e,t,r)}function u(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function l(e){var t,r=null===e||void 0===e||null===(t=e.supportedSpatialAggregationStatistics)||void 0===t?void 0:t.map((function(e){return e.toLowerCase()}));return{envelope:!(null===r||void 0===r||!r.includes("envelopeaggregate")),centroid:!(null===r||void 0===r||!r.includes("centroidaggregate")),convexHull:!(null===r||void 0===r||!r.includes("convexhullaggregate"))}}function p(e,t){var r,i=null===e||void 0===e||null===(r=e.supportedOperationsWithCacheHint)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()}));return!(null===i||void 0===i||!i.includes(t.toLowerCase()))}function c(e,t){return{analytics:d(e),attachment:y(e),data:h(e),metadata:f(e),operations:v(e.capabilities,e,t),query:b(e,t),queryRelated:m(e),queryTopFeatures:g(e),editing:_(e)}}function d(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function y(e){var t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:o(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((function(e){var t=s[e.name];t&&(r[t]=!!e.isEnabled)})),r}function h(e){return{isVersioned:o(e,"isDataVersioned",!1),supportsAttachment:o(e,"hasAttachments",!1),supportsM:o(e,"hasM",!1),supportsZ:o(e,"hasZ",!1)}}function f(e){return{supportsAdvancedFieldProperties:o(e,"supportsFieldDescriptionProperty",!1)}}function v(e,t,r){var i=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],s=r?(0,n.Qc)(r):null,a=i.includes(null!=s&&"MapServer"===s.serverType?"data":"query"),u=i.includes("editing")&&!t.datesInUnknownTimezone,l=u&&i.includes("create"),p=u&&i.includes("delete"),c=u&&i.includes("update"),d=i.includes("changetracking"),y=t.advancedQueryCapabilities;return u&&!(l||p||c)&&(l=p=c=!0),{supportsCalculate:o(t,"supportsCalculate",!1),supportsTruncate:o(t,"supportsTruncate",!1),supportsValidateSql:o(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:p,supportsEditing:u,supportsChangeTracking:d,supportsQuery:a,supportsQueryAnalytics:o(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:o(y,"supportsQueryAttachments",!1),supportsQueryTopFeatures:o(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:o(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:o(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:o(t,"supportsAsyncConvert3D",!1)}}function b(e,t){var r,s=e.advancedQueryCapabilities,u=e.ownershipBasedAccessControlForFeatures,c=e.archivingInfo,d=e.currentVersion,y=!(null===t||void 0===t?void 0:t.includes("MapServer"))||d>=(0,i.Z)("mapserver-pbf-version-support"),h=(0,n.M8)(t),f=new Set((null!==(r=e.supportedQueryFormats)&&void 0!==r?r:"").split(",").map((function(e){return e.toLowerCase().trim()})));return{supportsStatistics:o(s,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:o(s,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:o(s,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:l(s),supportsCentroid:o(s,"supportsReturningGeometryCentroid",!1),supportsDistance:o(s,"supportsQueryWithDistance",!1),supportsDistinct:o(s,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:o(s,"supportsReturningQueryExtent",!1),supportsGeometryProperties:o(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:o(s,"supportsHavingClause",!1),supportsOrderBy:o(s,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:o(s,"supportsPagination",!1),supportsQuantization:o(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:o(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:o(e,"supportsReturningQueryGeometry",!1),supportsResultType:o(s,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:o(s,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:o(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:o(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:o(s,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:o(u,"allowOthersToQuery",!0),supportsHistoricMoment:o(c,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&f.has("pbf"),supportsDisjointSpatialRelationship:o(s,"supportsDisjointSpatialRel",!1),supportsCacheHint:o(s,"supportsQueryWithCacheHint",!1)||p(s,"query"),supportsDefaultSpatialReference:o(s,"supportsDefaultSR",!1),supportsCompactGeometry:h,supportsFullTextSearch:o(s,"supportsFullTextSearch",!1),maxRecordCountFactor:a(e,"maxRecordCountFactor",void 0),maxRecordCount:a(e,"maxRecordCount",void 0),standardMaxRecordCount:a(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:a(e,"tileMaxRecordCount",void 0)}}function m(e){var t=e.advancedQueryCapabilities,r=o(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:o(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p(t,"queryRelated")}}function g(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function _(e){var t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:o(e,"allowGeometryUpdates",!0),supportsGlobalId:o(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:o(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:o(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:o(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:o(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:o(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:o(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:o(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:o(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:o(r,"supportsAsyncApplyEdits",!1)}}}}]);
//# sourceMappingURL=6571.788cd4db.chunk.js.map