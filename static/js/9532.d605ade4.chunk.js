"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[9532,2410],{9532:function(e,t,r){r.r(t),r.d(t,{default:function(){return se}});var i=r(74165),n=r(37762),o=r(15861),a=r(93433),l=r(1413),s=r(15671),u=r(43144),d=r(60136),p=r(29388),f=r(27366),c=r(44055),y=r(76200),v=r(10064),h=r(84652),b=r(32718),m=r(97642),g=r(18202),w=r(66978),Z=r(35995),_=r(49861),F=r(25243),C=r(38511),I=r(69912),k=r(31201),S=r(30651),x=r(27961),T=r(11936),j=r(6061),P=r(29598),q=r(56811),R=r(54395),L=r(27135),B=r(46784),N=(r(63780),r(93169),function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).field=null,i.type=null,i}return(0,u.Z)(r,[{key:"clone",value:function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}}]),r}(B.wq));(0,f._)([(0,_.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],N.prototype,"field",void 0),(0,f._)([(0,_.Cb)({readOnly:!0,nonNullable:!0,json:{read:!1}})],N.prototype,"type",void 0);var M,O=N=(0,f._)([(0,I.j)("esri.layers.pointCloudFilters.PointCloudFilter")],N),E=M=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).requiredClearBits=null,i.requiredSetBits=null,i.type="bitfield",i}return(0,u.Z)(r,[{key:"clone",value:function(){return new M({field:this.field,requiredClearBits:(0,h.d9)(this.requiredClearBits),requiredSetBits:(0,h.d9)(this.requiredSetBits)})}}]),r}(O);(0,f._)([(0,_.Cb)({type:[F.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredSetBits}}}}})],E.prototype,"requiredClearBits",void 0),(0,f._)([(0,_.Cb)({type:[F.z8],json:{write:{enabled:!0,overridePolicy:function(){return{enabled:!0,isRequired:!this.requiredClearBits}}}}})],E.prototype,"requiredSetBits",void 0),(0,f._)([(0,L.J)({pointCloudBitfieldFilter:"bitfield"})],E.prototype,"type",void 0);var V,A=E=M=(0,f._)([(0,I.j)("esri.layers.pointCloudFilters.PointCloudBitfieldFilter")],E),D=V=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).includedReturns=[],i.type="return",i}return(0,u.Z)(r,[{key:"clone",value:function(){return new V({field:this.field,includedReturns:(0,h.d9)(this.includedReturns)})}}]),r}(O);(0,f._)([(0,_.Cb)({type:[["firstOfMany","last","lastOfMany","single"]],json:{write:{enabled:!0,isRequired:!0}}})],D.prototype,"includedReturns",void 0),(0,f._)([(0,L.J)({pointCloudReturnFilter:"return"})],D.prototype,"type",void 0);var z,G=D=V=(0,f._)([(0,I.j)("esri.layers.pointCloudFilters.PointCloudReturnFilter")],D),K=z=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).mode="exclude",i.type="value",i.values=[],i}return(0,u.Z)(r,[{key:"clone",value:function(){return new z({field:this.field,mode:this.mode,values:(0,h.d9)(this.values)})}}]),r}(O);(0,f._)([(0,_.Cb)({type:["exclude","include"],json:{write:{enabled:!0,isRequired:!0}}})],K.prototype,"mode",void 0),(0,f._)([(0,L.J)({pointCloudValueFilter:"value"})],K.prototype,"type",void 0),(0,f._)([(0,_.Cb)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],K.prototype,"values",void 0);var J,H={key:"type",base:O,typeMap:{value:K=z=(0,f._)([(0,I.j)("esri.layers.pointCloudFilters.PointCloudValueFilter")],K),bitfield:A,return:G}},U=r(45948),$=r(83040),Q=r(25610),Y=r(89860),W=r(21134),X=r(2632),ee=J=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).type="point-cloud-rgb",i.field=null,i}return(0,u.Z)(r,[{key:"clone",value:function(){return new J((0,l.Z)((0,l.Z)({},this.cloneProperties()),{},{field:(0,h.d9)(this.field)}))}}]),r}(X.Z);(0,f._)([(0,L.J)({pointCloudRGBRenderer:"point-cloud-rgb"})],ee.prototype,"type",void 0),(0,f._)([(0,_.Cb)({type:String,json:{write:!0}})],ee.prototype,"field",void 0);var te=ee=J=(0,f._)([(0,I.j)("esri.renderers.PointCloudRGBRenderer")],ee),re=r(89431),ie=r(87005),ne={key:"type",base:X.Z,typeMap:{"point-cloud-class-breaks":W.Z,"point-cloud-rgb":te,"point-cloud-stretch":re.Z,"point-cloud-unique-value":ie.Z},errorContext:"renderer"},oe=r(81085),ae=(0,Q.v)(),le=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).operationalLayerType="PointCloudLayer",e.popupEnabled=!0,e.popupTemplate=null,e.opacity=1,e.filters=[],e.fields=null,e.fieldsIndex=null,e.outFields=null,e.path=null,e.legendEnabled=!0,e.renderer=null,e.type="point-cloud",e}return(0,u.Z)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,l.Z)({url:e},t):e}},{key:"defaultPopupTemplate",get:function(){return this.attributeStorageInfo?this.createPopupTemplate():null}},{key:"getFieldDomain",value:function(e){var t=this.fieldsIndex.get(e);return t&&t.domain?t.domain:null}},{key:"readServiceFields",value:function(e,t,r){return Array.isArray(e)?e.map((function(e){var t=new $.Z;return"FieldTypeInteger"===e.type&&((e=(0,h.d9)(e)).type="esriFieldTypeInteger"),t.read(e,r),t})):Array.isArray(t.attributeStorageInfo)?t.attributeStorageInfo.map((function(e){return new $.Z({name:e.name,type:"ELEVATION"===e.name?"double":"integer"})})):null}},{key:"elevationInfo",set:function(e){this._set("elevationInfo",e),this._validateElevationInfo()}},{key:"writeRenderer",value:function(e,t,r,i){(0,g.RB)("layerDefinition.drawingInfo.renderer",e.write({},i),t)}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null,i=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(w.r9).then((function(){return t._fetchService(r)}));return this.addResolvingPromise(i),Promise.resolve(this)}},{key:"createPopupTemplate",value:function(e){var t=(0,oe.eZ)(this,e);return t&&(this._formatPopupTemplateReturnsField(t),this._formatPopupTemplateRGBField(t)),t}},{key:"_formatPopupTemplateReturnsField",value:function(e){var t,r=this.fieldsIndex.get("RETURNS");if(r){var i=null===(t=e.fieldInfos)||void 0===t?void 0:t.find((function(e){return e.fieldName===r.name}));if(i){var n=new Y.Z({name:"pcl-returns-decoded",title:r.alias||r.name,expression:"\n        var returnValue = $feature.".concat(r.name,';\n        return (returnValue % 16) + " / " + Floor(returnValue / 16);\n      ')});e.expressionInfos=[].concat((0,a.Z)(e.expressionInfos||[]),[n]),i.fieldName="expression/pcl-returns-decoded"}}}},{key:"_formatPopupTemplateRGBField",value:function(e){var t,r=this.fieldsIndex.get("RGB");if(r){var i=null===(t=e.fieldInfos)||void 0===t?void 0:t.find((function(e){return e.fieldName===r.name}));if(i){var n=new Y.Z({name:"pcl-rgb-decoded",title:r.alias||r.name,expression:"\n        var rgb = $feature.".concat(r.name,';\n        var red = Floor(rgb / 65536, 0);\n        var green = Floor((rgb - (red * 65536)) / 256,0);\n        var blue = rgb - (red * 65536) - (green * 256);\n\n        return "rgb(" + red + "," + green + "," + blue + ")";\n      ')});e.expressionInfos=[].concat((0,a.Z)(e.expressionInfos||[]),[n]),i.fieldName="expression/pcl-rgb-decoded"}}}},{key:"queryCachedStatistics",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var o,a,l,s,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:if(this.attributeStorageInfo){e.next=4;break}throw new v.Z("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");case 4:if(o=this.fieldsIndex.get(t)){e.next=7;break}throw new v.Z("pointcloudlayer:field-unexisting","Field '".concat(t,"' does not exist on the layer"));case 7:a=(0,n.Z)(this.attributeStorageInfo),e.prev=8,a.s();case 10:if((l=a.n()).done){e.next=17;break}if((s=l.value).name!==o.name){e.next=15;break}return u=(0,Z.v_)(this.parsedUrl.path,"./statistics/".concat(s.key)),e.abrupt("return",(0,y.default)(u,{query:{f:"json",token:this.apiKey},responseType:"json",signal:r?r.signal:null}).then((function(e){return e.data})));case 15:e.next=10;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),a.e(e.t0);case 22:return e.prev=22,a.f(),e.finish(22);case 25:throw new v.Z("pointcloudlayer:no-cached-statistics","Cached statistics for this attribute are not available");case 26:case"end":return e.stop()}}),e,this,[[8,19,22,25]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(t,r){var n=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._debouncedSaveOperations(R.xp.SAVE_AS,(0,l.Z)((0,l.Z)({},r),{},{getTypeKeywords:function(){return n._getTypeKeywords()},portalItemLayerType:"point-cloud"}),t));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"save",value:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(){var t,r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={getTypeKeywords:function(){return r._getTypeKeywords()},portalItemLayerType:"point-cloud"},e.abrupt("return",this._debouncedSaveOperations(R.xp.SAVE,t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"validateLayer",value:function(e){if(e.layerType&&"PointCloud"!==e.layerType)throw new v.Z("pointcloudlayer:layer-type-not-supported","PointCloudLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new v.Z("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"});if(this.version.major>2)throw new v.Z("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x-2.x"})}},{key:"hasCachedStatistics",value:function(e){return null!=this.attributeStorageInfo&&this.attributeStorageInfo.some((function(t){return t.name===e}))}},{key:"_getTypeKeywords",value:function(){return["PointCloud"]}},{key:"_validateElevationInfo",value:function(){var e=this.elevationInfo;e&&("absolute-height"!==e.mode&&b.Z.getLogger(this).warn(".elevationInfo=","Point cloud layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&b.Z.getLogger(this).warn(".elevationInfo=","Point cloud layers do not support featureExpressionInfo"))}}]),r}((0,R.Vt)((0,T.Y)((0,j.q)((0,P.I)((0,q.M)((0,m.R)((0,x.V)(S.Z))))))));(0,f._)([(0,_.Cb)({type:["PointCloudLayer"]})],le.prototype,"operationalLayerType",void 0),(0,f._)([(0,_.Cb)(U.C_)],le.prototype,"popupEnabled",void 0),(0,f._)([(0,_.Cb)({type:c.Z,json:{name:"popupInfo",write:!0}})],le.prototype,"popupTemplate",void 0),(0,f._)([(0,_.Cb)({readOnly:!0,json:{read:!1}})],le.prototype,"defaultPopupTemplate",null),(0,f._)([(0,_.Cb)({readOnly:!0,json:{write:!1,read:!1,origins:{"web-document":{write:!1,read:!1}}}})],le.prototype,"opacity",void 0),(0,f._)([(0,_.Cb)({type:["show","hide"]})],le.prototype,"listMode",void 0),(0,f._)([(0,_.Cb)({types:[H],json:{origins:{service:{read:{source:"filters"}}},name:"layerDefinition.filters",write:!0}})],le.prototype,"filters",void 0),(0,f._)([(0,_.Cb)({type:[$.Z]})],le.prototype,"fields",void 0),(0,f._)([(0,_.Cb)(ae.fieldsIndex)],le.prototype,"fieldsIndex",void 0),(0,f._)([(0,C.r)("service","fields",["fields","attributeStorageInfo"])],le.prototype,"readServiceFields",null),(0,f._)([(0,_.Cb)(ae.outFields)],le.prototype,"outFields",void 0),(0,f._)([(0,_.Cb)({readOnly:!0})],le.prototype,"attributeStorageInfo",void 0),(0,f._)([(0,_.Cb)(U.PV)],le.prototype,"elevationInfo",null),(0,f._)([(0,_.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],le.prototype,"path",void 0),(0,f._)([(0,_.Cb)(U.rn)],le.prototype,"legendEnabled",void 0),(0,f._)([(0,_.Cb)({types:ne,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:{target:{"layerDefinition.drawingInfo.renderer":{types:ne},"layerDefinition.drawingInfo.transparency":{type:Number}}}}})],le.prototype,"renderer",void 0),(0,f._)([(0,k.c)("renderer")],le.prototype,"writeRenderer",null),(0,f._)([(0,_.Cb)({json:{read:!1},readOnly:!0})],le.prototype,"type",void 0);var se=le=(0,f._)([(0,I.j)("esri.layers.PointCloudLayer")],le)},52410:function(e,t,r){r.d(t,{Z:function(){return d}});var i=r(37762),n=r(15671),o=r(43144),a=r(37270);function l(e){return"date"===e.type||"esriFieldTypeDate"===e.type||"date-only"===e.type||"esriFieldTypeDateOnly"===e.type||"timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type}function s(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function u(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,n.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o=[],d=(0,i.Z)(t);try{for(d.s();!(r=d.n()).done;){var c=r.value,y=null===c||void 0===c?void 0:c.name,v=f(null===c||void 0===c?void 0:c.name);if(y&&v){var h=p(y);this._fieldsMap.set(y,c),this._fieldsMap.set(h,c),this._normalizedFieldsMap.set(v,c),o.push(h),l(c)?(this.dateFields.push(c),this._dateFieldsSet.add(c)):(0,a.H7)(c)&&(this._numericFieldsSet.add(c),this.numericFields.push(c)),s(c)||u(c)||(c.editable=null==c.editable||!!c.editable,c.nullable=null==c.nullable||!!c.nullable)}}}catch(b){d.e(b)}finally{d.f()}o.sort(),this.uid=o.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,i.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;s(r)||u(r)||r.nullable||void 0!==(0,a.os)(r)||this._requiredFields.push(r)}}catch(n){t.e(n)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(p(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(f(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function p(e){return e.trim().toLowerCase()}function f(e){var t,r;return null!==(t=null===(r=(0,a.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},25610:function(e,t,r){r.d(t,{v:function(){return s}});var i=r(37762),n=r(32718),o=r(83040),a=r(52410),l=r(37270);function s(){return{fields:{type:[o.Z],value:null},fieldsIndex:{readOnly:!0,get:function(){return new a.Z(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;var t,r=(0,i.Z)(e);try{for(r.s();!(t=r.n()).done;){var o,a=t.value;(null===(o=this.fieldsIndex)||void 0===o?void 0:o.has(a))||n.Z.getLogger("esri.layers.support.fieldProperties").error("field-attributes-layer:invalid-field","Invalid field ".concat(a," found in outFields"),{layer:this,outFields:e})}}catch(s){r.e(s)}finally{r.f()}return(0,l.Q0)(this.fieldsIndex,e)}}}}},81085:function(e,t,r){r.d(t,{eZ:function(){return d}});var i=r(1413),n=r(44055),o=r(37270),a=r(26418),l=(r(23046),r(1374),r(39384),r(29230)),s=(r(29514),r(44051),r(98752),r(16698)),u=r(91738);function d(e,t){var r=e.displayField,i=e.editFieldsInfo,s=e.fields,u=e.objectIdField,d=e.title;if(!s)return null;var p=c({editFieldsInfo:i,fields:s,objectIdField:u},t);if(!p.length)return null;var f=function(e){var t=(0,o.O5)(e),r=e.titleBase;return t?"".concat(r,": {").concat(t.trim(),"}"):null!==r&&void 0!==r?r:""}({titleBase:d,fields:s,displayField:r}),y=[new l.Z,new a.Z];return new n.Z({title:f,content:y,fieldInfos:p})}var p=function(e,t){return t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,o.Fv)(e,t)};function f(e,t){return"oid"===e.type?-1:"oid"===t.type?1:v(e)?-1:v(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function c(e,t){var r,n=null===t||void 0===t?void 0:t.visibleFieldNames;return function(e,t){var r=e;return t&&(e=e.filter((function(e){return!t.includes(e.type)}))),e===r&&(e=e.slice()),e.sort(f),e}(null!==(r=e.fields)&&void 0!==r?r:[],(null===t||void 0===t?void 0:t.ignoreFieldTypes)||h).map((function(t){return new s.Z({fieldName:t.name,isEditable:(0,o.Hp)(t,e),label:t.alias,format:y(t),visible:p(t,(0,i.Z)((0,i.Z)({},e),{},{visibleFieldNames:n}))})}))}function y(e){switch(e.type){case"small-integer":case"integer":case"single":return new u.Z({digitSeparator:!0,places:0});case"double":return new u.Z({digitSeparator:!0,places:2});case"date":return new u.Z({dateFormat:"long-month-day-year"});default:return"string"===e.type&&(0,o.Ec)(e.name)?new u.Z({digitSeparator:!0,places:0}):null}}function v(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}var h=["geometry","blob","raster","guid","xml"]}}]);
//# sourceMappingURL=9532.d605ade4.chunk.js.map