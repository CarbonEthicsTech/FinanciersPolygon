"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[5981,2410,291,357,1340],{16054:function(e,t,r){r.d(t,{z:function(){return s}});var i=r(15671),n=r(43144),o=r(18759),s=function(){function e(t,r){(0,i.Z)(this,e),this._storage=new o.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,n.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return c},Xq:function(){return p}});var i,n,o=r(29439),s=r(37762),a=r(15671),u=r(43144),l=r(27546);(n=i||(i={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";var p=function(){function e(t,r,i){(0,a.Z)(this,e),this.name=t,this._storage=r,this.id=y+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}return(0,u.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,i)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,a.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}return(0,u.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,n,o){t=e.id+t;var s=this._db.get(t);if(s&&(this._size-=s.size,e.size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,i.ALL)),n>this._maxSize)this._notifyRemove(t,r,i.ALL);else if(void 0!==r)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(o,-3)- -3;this._db.set(t,{entry:r,size:n,lifetime:a,lives:a}),this._size+=n,e.size+=n,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,n){t=e.id+t;var o=this._db.get(t);if(o&&o.entry===r){for(this._size-=o.size,e.size-=o.size;n>this._maxSize;){var s=this._notifyRemove(t,r,i.SOME);if(!(null!=s&&s>0))return void this._db.delete(t);n=s}o.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((function(t,n){var o=t.lifetime;i[o]=(i[o]||0)+t.size,e._users.forAll((function(e){var i=e.id,o=e.name;if(n.startsWith(i)){var s=r[o]||0;r[o]=s+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var i=r[t]||0;r[t]=i,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var o=Object.keys(r);o.sort((function(e,t){return r[t]-r[e]})),o.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+n[e]}));for(var s=i.length-1;s>=0;--s){var a=i[s];a&&(t["Priority "+(s+-3-1)]=Math.round(a/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,n){n.startsWith(r)&&(t._size-=e.size,t._db.delete(n),t._notifyRemove(n,e.entry,i.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,i.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var i;return this._removeFuncs.some((function(n){if(e.startsWith(n[0])){var o=n[1](t,r);return"number"==typeof o&&(i=o),!0}return!1})),i}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,s.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var i=(0,o.Z)(t.value,2),n=i[0],a=i[1];if(this._purgeItem(n,a),this._size<=.9*this.maxSize)return}}catch(u){r.e(u)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,i=(0,s.Z)(e._db);try{for(i.s();!(r=i.n()).done;){var n=(0,o.Z)(r.value,2),a=n[0],l=n[1];if(a.startsWith(t.id)&&(e._purgeItem(a,l,t),t.size<=.9*t.maxSize))return}}catch(u){i.e(u)}finally{i.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var n=this._notifyRemove(e,t.entry,i.SOME);null!=n&&n>0&&(this._size+=n,r&&(r.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),y=0},91340:function(e,t,r){r.d(t,{aX:function(){return O},or:function(){return M}});var i=r(74165),n=r(29439),o=r(15861),s=r(37762),a=r(42265),u=r(10064),l=r(32718),p=r(80885),c=r(29909),y=r(76335),f=r(92975),d=r(81753),h=r(1413),v=(r(59486),r(76200)),m=r(77981),g=r(23084);function _(e,t,r,i){return b.apply(this,arguments)}function b(){return b=(0,o.Z)((0,i.Z)().mark((function e(t,r,n,o){var s,a,u,l,p,c,y,f;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,g.en)(t),a=r[0].spatialReference,u=(0,h.Z)((0,h.Z)({},o),{},{query:(0,h.Z)((0,h.Z)({},s.query),{},{f:"json",sr:JSON.stringify(a),target:JSON.stringify({geometryType:(0,m.Ji)(r[0]),geometries:r}),cutter:JSON.stringify(n)})}),e.next=5,(0,v.default)(s.path+"/cut",u);case 5:return l=e.sent,p=l.data,c=p.cutIndexes,y=p.geometries,f=void 0===y?[]:y,e.abrupt("return",{cutIndexes:c,geometries:f.map((function(e){var t=(0,m.im)(e);return t.spatialReference=a,t}))});case 11:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}var S=r(35995),Z=r(35594);function x(e,t,r){return w.apply(this,arguments)}function w(){return w=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,s,a,u,l,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="string"==typeof t?(0,S.mN)(t):t,a=r[0].spatialReference,u=(0,m.Ji)(r[0]),l=(0,h.Z)((0,h.Z)({},n),{},{query:(0,h.Z)((0,h.Z)({},s.query),{},{f:"json",sr:null!==(o=a.wkid)&&void 0!==o?o:JSON.stringify(a),geometries:JSON.stringify((0,Z.F)(r))})}),e.next=6,(0,v.default)(s.path+"/simplify",l);case 6:return p=e.sent,c=p.data,e.abrupt("return",(0,Z.o)(c.geometries,u,a));case 9:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}var k=l.Z.getLogger("esri.geometry.support.normalizeUtils");function C(e,t,r){if(t){var i=function(e,t){if(!(e instanceof c.Z||e instanceof p.Z)){var r="straightLineDensify: the input geometry is neither polyline nor polygon";throw k.error(r),new u.Z(r)}var i,n=(0,y.x3)(e),o=[],a=(0,s.Z)(n);try{for(a.s();!(i=a.n()).done;){var l=i.value,f=[];o.push(f),f.push([l[0][0],l[0][1]]);for(var d=0;d<l.length-1;d++){var h=l[d][0],v=l[d][1],m=l[d+1][0],g=l[d+1][1],_=Math.sqrt((m-h)*(m-h)+(g-v)*(g-v)),b=(g-v)/_,S=(m-h)/_,Z=_/t;if(Z>1){for(var x=1;x<=Z-1;x++){var w=x*t,C=S*w+h,z=b*w+v;f.push([C,z])}var R=(_+Math.floor(Z-1)*t)/2,O=S*R+h,F=b*R+v;f.push([O,F])}f.push([m,g])}}}catch(M){a.e(M)}finally{a.f()}return function(e){return"polygon"===e.type}(e)?new p.Z({rings:o,spatialReference:e.spatialReference}):new c.Z({paths:o,spatialReference:e.spatialReference})}(e,1e6);e=(0,d.Sx)(i,!0)}return r&&(e=(0,y.Sy)(e,r)),e}function z(e,t,r){if(Array.isArray(e)){var i=e[0];if(i>t){var n=(0,y.XZ)(i,t);e[0]=i+n*(-2*t)}else if(i<r){var o=(0,y.XZ)(i,r);e[0]=i+o*(-2*r)}}else{var s=e.x;if(s>t){var a=(0,y.XZ)(s,t);e=e.clone().offset(a*(-2*t),0)}else if(s<r){var u=(0,y.XZ)(s,r);e=e.clone().offset(u*(-2*r),0)}}return e}function R(e,t){for(var r=-1,i=function(){for(var i=t.cutIndexes[n],o=t.geometries[n],a=(0,y.x3)(o),u=function(e){var t=a[e];t.some((function(r){if(r[0]<180)return!0;for(var i=0,n=0;n<t.length;n++){var s=t[n][0];i=s>i?s:i}i=Number(i.toFixed(9));for(var a=-360*(0,y.XZ)(i,180),u=0;u<t.length;u++){var l=o.getPoint(e,u);o.setPoint(e,u,l.clone().offset(a,0))}return!0}))},l=0;l<a.length;l++)u(l);if(i===r){if(function(e){return"polygon"===e[0].type}(e)){var p,c=(0,s.Z)((0,y.x3)(o));try{for(c.s();!(p=c.n()).done;){var f=p.value;e[i]=e[i].addRing(f)}}catch(m){c.e(m)}finally{c.f()}}else if(function(e){return"polyline"===e[0].type}(e)){var d,h=(0,s.Z)((0,y.x3)(o));try{for(h.s();!(d=h.n()).done;){var v=d.value;e[i]=e[i].addPath(v)}}catch(m){h.e(m)}finally{h.f()}}}else r=i,e[i]=o},n=0;n<t.cutIndexes.length;n++)i();return e}function O(e,t,r){return F.apply(this,arguments)}function F(){return F=(0,o.Z)((0,i.Z)().mark((function e(t,r,n){var o,u,l,h,v,m,g,b,S,Z,w,F,M,L,T,N,A,I,j,J,E,P,D,G,q,Q,B,H,U,W,X,K,V,$,Y,ee,te,re,ie,ne,oe;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return",O([t],r));case 2:r&&"string"!=typeof r&&k.warn("normalizeCentralMeridian()","The url object is deprecated, use the url string instead"),u="string"==typeof r?r:null!==(o=null===r||void 0===r?void 0:r.url)&&void 0!==o?o:a.Z.geometryServiceUrl,w=0,F=[],M=[],L=(0,s.Z)(t);try{for(L.s();!(T=L.n()).done;)null!=(N=T.value)?(l||(l=N.spatialReference,h=(0,f.C5)(l),v=l.isWebMercator,b=v?102100:4326,m=y.UZ[b].maxX,g=y.UZ[b].minX,S=y.UZ[b].plus180Line,Z=y.UZ[b].minus180Line),h?"mesh"===N.type?M.push(N):"point"===N.type?M.push(z(N.clone(),m,g)):"multipoint"===N.type?((A=N.clone()).points=A.points.map((function(e){return z(e,m,g)})),M.push(A)):"extent"===N.type?(I=N.clone()._normalize(!1,!1,h),M.push(I.rings?new p.Z(I):I)):N.extent?(j=N.extent,J=(0,y.XZ)(j.xmin,g)*(2*m),E=0===J?N.clone():(0,y.Sy)(N.clone(),J),j.offset(J,0),j.intersects(S)&&j.xmax!==m?(w=j.xmax>w?j.xmax:w,E=C(E,v),F.push(E),M.push("cut")):j.intersects(Z)&&j.xmin!==g?(w=j.xmax*(2*m)>w?j.xmax*(2*m):w,E=C(E,v,360),F.push(E),M.push("cut")):M.push(E)):M.push(N.clone()):M.push(N)):M.push(N)}catch(i){L.e(i)}finally{L.f()}for(P=(0,y.XZ)(w,m),D=-90,G=P,q=new c.Z;P>0;)Q=360*P-180,q.addPath([[Q,D],[Q,-1*D]]),D*=-1,P--;if(!(F.length>0&&G>0)){e.next=29;break}return e.t0=R,e.t1=F,e.next=16,_(u,F,q,n);case 16:for(e.t2=e.sent,B=(0,e.t0)(e.t1,e.t2),H=[],U=[],W=0;W<M.length;W++)"cut"!==(X=M[W])?U.push(X):(K=B.shift(),null!=(V=t[W])&&"polygon"===V.type&&V.rings&&V.rings.length>1&&K.rings.length>=V.rings.length?(H.push(K),U.push("simplify")):U.push(v?(0,d.$)(K):K));if(H.length){e.next=23;break}return e.abrupt("return",U);case 23:return e.next=25,x(u,H,n);case 25:for($=e.sent,Y=[],ee=0;ee<U.length;ee++)"simplify"!==(te=U[ee])?Y.push(te):Y.push(v?(0,d.$)($.shift()):$.shift());return e.abrupt("return",Y);case 29:for(re=[],ie=0;ie<M.length;ie++)"cut"!==(ne=M[ie])?re.push(ne):(oe=F.shift(),re.push(!0===v?(0,d.$)(oe):oe));return e.abrupt("return",re);case 32:case"end":return e.stop()}}),e)}))),F.apply(this,arguments)}function M(e,t){var r=(0,f.C5)(t);if(r){var i=(0,n.Z)(r.valid,2),o=i[0],s=i[1],a=s-o;if(e<o)for(;e<o;)e+=a;if(e>s)for(;e>s;)e-=a}return e}},76335:function(e,t,r){r.d(t,{Sy:function(){return l},UZ:function(){return a},XZ:function(){return u},x3:function(){return p}});var i=r(37762),n=r(29909),o=r(78952),s=r(77981),a={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new n.Z({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:o.Z.WebMercator}),minus180Line:new n.Z({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:o.Z.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new n.Z({paths:[[[180,-180],[180,180]]],spatialReference:o.Z.WGS84}),minus180Line:new n.Z({paths:[[[-180,-180],[-180,180]]],spatialReference:o.Z.WGS84})}};function u(e,t){return Math.ceil((e-t)/(2*t))}function l(e,t){var r,n=p(e),o=(0,i.Z)(n);try{for(o.s();!(r=o.n()).done;){var s,a=r.value,u=(0,i.Z)(a);try{for(u.s();!(s=u.n()).done;){s.value[0]+=t}}catch(l){u.e(l)}finally{u.f()}}}catch(l){o.e(l)}finally{o.f()}return e}function p(e){return(0,s.oU)(e)?e.rings:e.paths}},33513:function(e,t,r){r.r(t),r.d(t,{default:function(){return Y}});var i=r(1413),n=r(74165),o=r(15861),s=r(97326),a=r(11752),u=r(61120),l=r(37762),p=r(15671),c=r(43144),y=r(60136),f=r(29388),d=r(27366),h=(r(59486),r(52639)),v=(r(51508),r(40281)),m=r(10064),g=r(84652),_=r(97642),b=r(18202),S=r(51370),Z=r(49861),x=(r(25243),r(38511)),w=r(69912),k=r(31201),C=r(79803),z=r(65156),R=r(91340),O=r(92975),F=r(64326),M=r(93655),L=r(30651),T=r(25820),N=r(6693),A=r(6061),I=r(29598),j=r(56811),J=r(83040),E=r(61459),P=r(16851),D=r(16072),G=r(58009),q=r(78952),Q=r(53866);function B(e){return"markup"===e.featureCollectionType||e.layers.some((function(e){return null!=e.layerDefinition.visibilityField||!H(e)}))}function H(e){var t,r=e.layerDefinition,i=e.featureSet,n=null!==(t=r.geometryType)&&void 0!==t?t:i.geometryType;return V.find((function(e){var t;return n===e.geometryTypeJSON&&(null===(t=r.drawingInfo)||void 0===t||null===(t=t.renderer)||void 0===t||null===(t=t.symbol)||void 0===t?void 0:t.type)===e.identifyingSymbol.type}))}function U(){return new Q.Z({xmin:-180,ymin:-90,xmax:180,ymax:90})}var W=new J.Z({name:"OBJECTID",alias:"OBJECTID",type:"oid",nullable:!1,editable:!1}),X=new J.Z({name:"title",alias:"Title",type:"string",nullable:!0,editable:!0}),K=function(e){(0,y.Z)(r,e);var t=(0,f.Z)(r);function r(e){var i;return(0,p.Z)(this,r),(i=t.call(this,e)).visibilityMode="inherited",i}return(0,c.Z)(r,[{key:"initialize",value:function(){var e,t=this,r=(0,l.Z)(this.graphics);try{for(r.s();!(e=r.n()).done;){e.value.sourceLayer=this.layer}}catch(i){r.e(i)}finally{r.f()}this.graphics.on("after-add",(function(e){e.item.sourceLayer=t.layer})),this.graphics.on("after-remove",(function(e){e.item.sourceLayer=null}))}},{key:"fullExtent",get:function(){var e,t=null===(e=this.layer)||void 0===e?void 0:e.spatialReference,r=this.fullBounds;return t?null==r?(0,C.projectOrLoad)(U(),t).geometry:(0,z.HH)(r,t):null}},{key:"fullBounds",get:function(){var e,t=null===(e=this.layer)||void 0===e?void 0:e.spatialReference;if(!t)return null;var r=(0,z.cS)();return this.graphics.forEach((function(e){var i=null!=e.geometry?(0,C.projectOrLoad)(e.geometry,t).geometry:null;null!=i&&(0,z.jn)(r,"point"===i.type?i:i.extent,r)})),(0,z.fS)(r,z.Gv)?null:r}},{key:"sublayers",get:function(){return this.graphics}}]),r}(M.Z);(0,d._)([(0,Z.Cb)({readOnly:!0})],K.prototype,"fullExtent",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],K.prototype,"fullBounds",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],K.prototype,"sublayers",null),(0,d._)([(0,Z.Cb)()],K.prototype,"layer",void 0),(0,d._)([(0,Z.Cb)()],K.prototype,"layerId",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],K.prototype,"visibilityMode",void 0),K=(0,d._)([(0,w.j)("esri.layers.MapNotesLayer.MapNotesSublayer")],K);var V=[{geometryType:"polygon",geometryTypeJSON:"esriGeometryPolygon",id:"polygonLayer",layerId:0,title:"Polygons",identifyingSymbol:(new E.Z).toJSON()},{geometryType:"polyline",geometryTypeJSON:"esriGeometryPolyline",id:"polylineLayer",layerId:1,title:"Polylines",identifyingSymbol:(new P.Z).toJSON()},{geometryType:"multipoint",geometryTypeJSON:"esriGeometryMultipoint",id:"multipointLayer",layerId:2,title:"Multipoints",identifyingSymbol:(new D.Z).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"pointLayer",layerId:3,title:"Points",identifyingSymbol:(new D.Z).toJSON()},{geometryType:"point",geometryTypeJSON:"esriGeometryPoint",id:"textLayer",layerId:4,title:"Text",identifyingSymbol:(new G.Z).toJSON()}],$=function(e){(0,y.Z)(r,e);var t=(0,f.Z)(r);function r(e){var i;return(0,p.Z)(this,r),(i=t.call(this,e)).capabilities={operations:{supportsMapNotesEditing:!0}},i.featureCollections=null,i.featureCollectionJSON=null,i.featureCollectionType="notes",i.legendEnabled=!1,i.listMode="hide-children",i.minScale=0,i.maxScale=0,i.spatialReference=q.Z.WGS84,i.sublayers=new v.Z(V.map((function(e){return new K({id:e.id,layerId:e.layerId,title:e.title,layer:(0,s.Z)(i)})}))),i.title="Map Notes",i.type="map-notes",i.visibilityMode="inherited",i}return(0,c.Z)(r,[{key:"readCapabilities",value:function(e,t,r){return{operations:{supportsMapNotesEditing:!B(t)&&"portal-item"!==(null===r||void 0===r?void 0:r.origin)}}}},{key:"readFeatureCollections",value:function(e,t,r){if(!B(t))return null;var i=t.layers.map((function(e){var t=new F.default;return t.read(e,r),t}));return new v.Z({items:i})}},{key:"readLegacyfeatureCollectionJSON",value:function(e,t){return B(t)?(0,g.d9)(t.featureCollection):null}},{key:"fullExtent",get:function(){var e,t=this.spatialReference,r=(0,z.cS)();return null!=this.sublayers?this.sublayers.forEach((function(e){var t=e.fullBounds;return null!=t?(0,z.jn)(r,t,r):r}),r):null!==(e=this.featureCollectionJSON)&&void 0!==e&&e.layers.some((function(e){return e.layerDefinition.extent}))&&this.featureCollectionJSON.layers.forEach((function(e){var i=(0,C.projectOrLoad)(e.layerDefinition.extent,t).geometry;null!=i&&(0,z.jn)(r,i,r)})),(0,z.fS)(r,z.Gv)?(0,C.projectOrLoad)(U(),t).geometry:(0,z.HH)(r,t)}},{key:"readMinScale",value:function(e,t){var r,i=(0,l.Z)(t.layers);try{for(i.s();!(r=i.n()).done;){var n=r.value;if(null!=n.layerDefinition.minScale)return n.layerDefinition.minScale}}catch(o){i.e(o)}finally{i.f()}return 0}},{key:"readMaxScale",value:function(e,t){var r,i=(0,l.Z)(t.layers);try{for(i.s();!(r=i.n()).done;){var n=r.value;if(null!=n.layerDefinition.maxScale)return n.layerDefinition.maxScale}}catch(o){i.e(o)}finally{i.f()}return 0}},{key:"multipointLayer",get:function(){return this._findSublayer("multipointLayer")}},{key:"pointLayer",get:function(){return this._findSublayer("pointLayer")}},{key:"polygonLayer",get:function(){return this._findSublayer("polygonLayer")}},{key:"polylineLayer",get:function(){return this._findSublayer("polylineLayer")}},{key:"readSpatialReference",value:function(e,t){return t.layers.length?q.Z.fromJSON(t.layers[0].layerDefinition.spatialReference):q.Z.WGS84}},{key:"readSublayers",value:function(e,t,r){if(B(t))return null;var i,n=[],o=t.layers.reduce((function(e,t){var r;return Math.max(e,null!==(r=t.layerDefinition.id)&&void 0!==r?r:-1)}),-1)+1,s=(0,l.Z)(t.layers);try{for(s.s();!(i=s.n()).done;){var a,u=i.value,p=u.layerDefinition,c=u.featureSet,y=null!==(a=p.id)&&void 0!==a?a:o++,f=H(u);if(null!=f){var d=new K({id:f.id,title:p.name,layerId:y,layer:this,graphics:c.features.map((function(e){var t=e.geometry,r=e.symbol,i=e.attributes,n=e.popupInfo;return h.Z.fromJSON({attributes:i,geometry:t,symbol:r,popupTemplate:n})}))});n.push(d)}}}catch(m){s.e(m)}finally{s.f()}return new v.Z(n)}},{key:"writeSublayers",value:function(e,t,r,i){var n,o=this,s=this.minScale,a=this.maxScale;if(null!=e){var u=e.some((function(e){return e.graphics.length>0}));if(this.capabilities.operations.supportsMapNotesEditing){var p,c=[],y=this.spatialReference.toJSON(),f=(0,l.Z)(e);try{e:for(f.s();!(p=f.n()).done;){var d,h=p.value,v=(0,l.Z)(h.graphics);try{for(v.s();!(d=v.n()).done;){var g=d.value;if(null!=g.geometry){y=g.geometry.spatialReference.toJSON();break e}}}catch(x){v.e(x)}finally{v.f()}}}catch(x){f.e(x)}finally{f.f()}for(var _=function(){var t=Z[S],r=e.find((function(e){return t.id===e.id}));o._writeMapNoteSublayer(c,r,t,s,a,y,i)},S=0,Z=V;S<Z.length;S++)_();(0,b.RB)("featureCollection.layers",c,t)}else u&&(null===i||void 0===i||null===(n=i.messages)||void 0===n||n.push(new m.Z("map-notes-layer:editing-not-supported","New map notes cannot be added to this layer")))}}},{key:"textLayer",get:function(){return this._findSublayer("textLayer")}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"read",value:function(e,t){"featureCollection"in e&&(e=(0,g.d9)(e),Object.assign(e,e.featureCollection)),(0,a.Z)((0,u.Z)(r.prototype),"read",this).call(this,e,t)}},{key:"beforeSave",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){var t,r,i,o,s,a,u,p,c,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.sublayers){e.next=2;break}return e.abrupt("return");case 2:t=null,r=[],i=(0,l.Z)(this.sublayers),e.prev=5,i.s();case 7:if((o=i.n()).done){e.next=40;break}s=o.value,a=(0,l.Z)(s.graphics),e.prev=10,a.s();case 12:if((u=a.n()).done){e.next=30;break}if(null==(p=u.value).geometry){e.next=28;break}if(c=p.geometry,!t){e.next=26;break}if(e.t0=(0,O.fS)(c.spatialReference,t),e.t0){e.next=24;break}if(e.t1=(0,C.canProjectWithoutEngine)(c.spatialReference,t)||(0,C.isLoaded)(),e.t1){e.next=23;break}return e.next=23,(0,C.load)();case 23:p.geometry=(0,C.project)(c,t);case 24:e.next=27;break;case 26:t=c.spatialReference;case 27:r.push(p);case 28:e.next=12;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(10),a.e(e.t2);case 35:return e.prev=35,a.f(),e.finish(35);case 38:e.next=7;break;case 40:e.next=45;break;case 42:e.prev=42,e.t3=e.catch(5),i.e(e.t3);case 45:return e.prev=45,i.f(),e.finish(45);case 48:return e.next=50,(0,R.aX)(r.map((function(e){return e.geometry})));case 50:y=e.sent,r.forEach((function(e,t){return e.geometry=y[t]}));case 52:case"end":return e.stop()}}),e,this,[[5,42,45,48],[10,32,35,38]])})));return function(){return e.apply(this,arguments)}}()},{key:"_findSublayer",value:function(e){var t,r;return null==this.sublayers?null:null!==(t=null===(r=this.sublayers)||void 0===r?void 0:r.find((function(t){return t.id===e})))&&void 0!==t?t:null}},{key:"_writeMapNoteSublayer",value:function(e,t,r,i,n,o,s){var a=[];if(null!=t){var u,p=(0,l.Z)(t.graphics);try{for(p.s();!(u=p.n()).done;){var c=u.value;this._writeMapNote(a,c,r.geometryType,s)}}catch(y){p.e(y)}finally{p.f()}this._normalizeObjectIds(a,W),e.push({layerDefinition:{name:t.title,drawingInfo:{renderer:{type:"simple",symbol:(0,g.d9)(r.identifyingSymbol)}},id:t.layerId,geometryType:r.geometryTypeJSON,minScale:i,maxScale:n,objectIdField:"OBJECTID",fields:[W.toJSON(),X.toJSON()],spatialReference:o},featureSet:{features:a,geometryType:r.geometryTypeJSON}})}}},{key:"_writeMapNote",value:function(e,t,r,n){var o,s;if(null!=t){var a=t.geometry,u=t.symbol,l=t.popupTemplate;if(null!=a)if(a.type===r)if(null!=u){var p={attributes:(0,i.Z)({},t.attributes),geometry:a.toJSON(),symbol:u.toJSON()};null!=l&&(p.popupInfo=l.toJSON()),e.push(p)}else null===n||void 0===n||null===(s=n.messages)||void 0===s||s.push(new S.Z("map-notes-layer:no-symbol","Skipping map notes with no symbol",{graphic:t}));else null===n||void 0===n||null===(o=n.messages)||void 0===o||o.push(new S.Z("map-notes-layer:invalid-geometry-type",'Geometry "'.concat(a.type,'" cannot be saved in "').concat(r,'" layer'),{graphic:t}))}}},{key:"_normalizeObjectIds",value:function(e,t){var r,i=t.name,n=(0,T.S)(i,e)+1,o=new Set,s=(0,l.Z)(e);try{for(s.s();!(r=s.n()).done;){var a=r.value;a.attributes||(a.attributes={});var u=a.attributes;(null==u[i]||o.has(u[i]))&&(u[i]=n++),o.add(u[i])}}catch(p){s.e(p)}finally{s.f()}}}]),r}((0,N.h)((0,j.M)((0,A.q)((0,I.I)((0,_.R)(L.Z))))));(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"capabilities",void 0),(0,d._)([(0,x.r)(["portal-item","web-map"],"capabilities",["layers"])],$.prototype,"readCapabilities",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"featureCollections",void 0),(0,d._)([(0,x.r)(["web-map","portal-item"],"featureCollections",["layers"])],$.prototype,"readFeatureCollections",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{enabled:!0,target:"featureCollection"}}}}})],$.prototype,"featureCollectionJSON",void 0),(0,d._)([(0,x.r)(["web-map","portal-item"],"featureCollectionJSON",["featureCollection"])],$.prototype,"readLegacyfeatureCollectionJSON",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!0,write:{enabled:!0,ignoreOrigin:!0}}})],$.prototype,"featureCollectionType",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"fullExtent",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{target:"featureCollection.showLegend",overridePolicy:function(){return{enabled:null!=this.featureCollectionJSON}}}}}}})],$.prototype,"legendEnabled",void 0),(0,d._)([(0,Z.Cb)({type:["show","hide","hide-children"]})],$.prototype,"listMode",void 0),(0,d._)([(0,Z.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],$.prototype,"minScale",void 0),(0,d._)([(0,x.r)(["web-map","portal-item"],"minScale",["layers"])],$.prototype,"readMinScale",null),(0,d._)([(0,Z.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],$.prototype,"maxScale",void 0),(0,d._)([(0,x.r)(["web-map","portal-item"],"maxScale",["layers"])],$.prototype,"readMaxScale",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"multipointLayer",null),(0,d._)([(0,Z.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],$.prototype,"operationalLayerType",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"pointLayer",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"polygonLayer",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"polylineLayer",null),(0,d._)([(0,Z.Cb)({type:q.Z})],$.prototype,"spatialReference",void 0),(0,d._)([(0,x.r)(["web-map","portal-item"],"spatialReference",["layers"])],$.prototype,"readSpatialReference",null),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],$.prototype,"sublayers",void 0),(0,d._)([(0,x.r)("web-map","sublayers",["layers"])],$.prototype,"readSublayers",null),(0,d._)([(0,k.c)("web-map","sublayers")],$.prototype,"writeSublayers",null),(0,d._)([(0,Z.Cb)({readOnly:!0})],$.prototype,"textLayer",null),(0,d._)([(0,Z.Cb)()],$.prototype,"title",void 0),(0,d._)([(0,Z.Cb)({readOnly:!0,json:{read:!1}})],$.prototype,"type",void 0);var Y=$=(0,d._)([(0,w.j)("esri.layers.MapNotesLayer")],$)},25820:function(e,t,r){r.d(t,{S:function(){return o},X:function(){return n}});var i=r(37762),n=1;function o(e,t){var r,n=0,o=(0,i.Z)(t);try{for(o.s();!(r=o.n()).done;){var s,a=null===(s=r.value.attributes)||void 0===s?void 0:s[e];"number"==typeof a&&isFinite(a)&&(n=Math.max(n,a))}}catch(u){o.e(u)}finally{o.f()}return n}},27961:function(e,t,r){r.d(t,{V:function(){return p}});var i=r(15671),n=r(43144),o=r(60136),s=r(29388),a=r(27366),u=r(49861),l=(r(25243),r(63780),r(93169),r(69912));var p=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return(0,a._)([(0,u.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,a._)([(0,l.j)("esri.layers.mixins.APIKeyMixin")],t)}},11936:function(e,t,r){r.d(t,{Y:function(){return y}});var i=r(15671),n=r(43144),o=r(60136),s=r(29388),a=r(27366),u=r(32718),l=r(49861),p=(r(25243),r(63780),r(93169),r(69912)),c=r(25899),y=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,c.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,c.Nm)(e,u.Z.getLogger(this)))}}]),r}(e);return(0,a._)([(0,l.Cb)()],t.prototype,"title",null),(0,a._)([(0,l.Cb)({type:String})],t.prototype,"url",null),t=(0,a._)([(0,p.j)("esri.layers.mixins.ArcGISService")],t)}},87165:function(e,t,r){r.d(t,{Z:function(){return m}});var i=r(15671),n=r(43144),o=r(60136),s=r(29388),a=r(27366),u=r(11582),l=r(46784),p=r(49861),c=(r(25243),r(63780),r(93169),r(38511)),y=r(69912),f=r(31201),d=r(66591),h=r(12224),v=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).id=null,n.name=null,n.domains=null,n.templates=null,n}return(0,n.Z)(r,[{key:"readDomains",value:function(e){for(var t={},r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];t[n]=(0,d.im)(e[n])}return t}},{key:"writeDomains",value:function(e,t){for(var r={},i=0,n=Object.keys(e);i<n.length;i++){var o,s=n[i];e[s]&&(r[s]=null===(o=e[s])||void 0===o?void 0:o.toJSON())}t.domains=r}}]),r}((0,u.J)(l.wq));(0,a._)([(0,p.Cb)({json:{write:!0}})],v.prototype,"id",void 0),(0,a._)([(0,p.Cb)({json:{write:!0}})],v.prototype,"name",void 0),(0,a._)([(0,p.Cb)({json:{write:!0}})],v.prototype,"domains",void 0),(0,a._)([(0,c.r)("domains")],v.prototype,"readDomains",null),(0,a._)([(0,f.c)("domains")],v.prototype,"writeDomains",null),(0,a._)([(0,p.Cb)({type:[h.Z],json:{write:!0}})],v.prototype,"templates",void 0);var m=v=(0,a._)([(0,y.j)("esri.layers.support.FeatureType")],v)},52410:function(e,t,r){r.d(t,{Z:function(){return l}});var i=r(37762),n=r(15671),o=r(43144),s=r(37270);function a(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function u(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,n.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o,l=[],y=(0,i.Z)(t);try{for(y.s();!(r=y.n()).done;){var f=r.value,d=null===f||void 0===f?void 0:f.name,h=c(null===f||void 0===f?void 0:f.name);if(d&&h){var v=p(d);this._fieldsMap.set(d,f),this._fieldsMap.set(v,f),this._normalizedFieldsMap.set(h,f),l.push(v),"date"===(o=f).type||"esriFieldTypeDate"===o.type||"date-only"===o.type||"esriFieldTypeDateOnly"===o.type||"timestamp-offset"===o.type||"esriFieldTypeTimestampOffset"===o.type?(this.dateFields.push(f),this._dateFieldsSet.add(f)):(0,s.H7)(f)&&(this._numericFieldsSet.add(f),this.numericFields.push(f)),a(f)||u(f)||(f.editable=null==f.editable||!!f.editable,f.nullable=null==f.nullable||!!f.nullable)}}}catch(m){y.e(m)}finally{y.f()}l.sort(),this.uid=l.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,i.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;a(r)||u(r)||r.nullable||void 0!==(0,s.os)(r)||this._requiredFields.push(r)}}catch(n){t.e(n)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(p(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(c(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function p(e){return e.trim().toLowerCase()}function c(e){var t,r;return null!==(t=null===(r=(0,s.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},71065:function(e,t,r){r.d(t,{Z:function(){return d}});var i,n=r(15671),o=r(43144),s=r(60136),a=r(29388),u=r(27366),l=r(40281),p=r(46784),c=r(49861),y=(r(25243),r(63780),r(93169),r(69912)),f=i=function(e){(0,s.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).floorField=null,i.viewAllMode=!1,i.viewAllLevelIds=new l.Z,i}return(0,o.Z)(r,[{key:"clone",value:function(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(p.wq);(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],f.prototype,"floorField",void 0),(0,u._)([(0,c.Cb)({json:{read:!1,write:!1}})],f.prototype,"viewAllMode",void 0),(0,u._)([(0,c.Cb)({json:{read:!1,write:!1}})],f.prototype,"viewAllLevelIds",void 0);var d=f=i=(0,u._)([(0,y.j)("esri.layers.support.LayerFloorInfo")],f)},94582:function(e,t,r){r.d(t,{h:function(){return c}});var i=r(93169),n=r(25899),o={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function s(e,t,r){return!!u(e,t,r)}function a(e,t,r){return u(e,t,r)}function u(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function l(e){var t,r=null===e||void 0===e||null===(t=e.supportedSpatialAggregationStatistics)||void 0===t?void 0:t.map((function(e){return e.toLowerCase()}));return{envelope:!(null===r||void 0===r||!r.includes("envelopeaggregate")),centroid:!(null===r||void 0===r||!r.includes("centroidaggregate")),convexHull:!(null===r||void 0===r||!r.includes("convexhullaggregate"))}}function p(e,t){var r,i=null===e||void 0===e||null===(r=e.supportedOperationsWithCacheHint)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()}));return!(null===i||void 0===i||!i.includes(t.toLowerCase()))}function c(e,t){return{analytics:y(e),attachment:f(e),data:d(e),metadata:h(e),operations:v(e.capabilities,e,t),query:m(e,t),queryRelated:g(e),queryTopFeatures:_(e),editing:b(e)}}function y(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function f(e){var t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:s(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((function(e){var t=o[e.name];t&&(r[t]=!!e.isEnabled)})),r}function d(e){return{isVersioned:s(e,"isDataVersioned",!1),supportsAttachment:s(e,"hasAttachments",!1),supportsM:s(e,"hasM",!1),supportsZ:s(e,"hasZ",!1)}}function h(e){return{supportsAdvancedFieldProperties:s(e,"supportsFieldDescriptionProperty",!1)}}function v(e,t,r){var i=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],o=r?(0,n.Qc)(r):null,a=i.includes(null!=o&&"MapServer"===o.serverType?"data":"query"),u=i.includes("editing")&&!t.datesInUnknownTimezone,l=u&&i.includes("create"),p=u&&i.includes("delete"),c=u&&i.includes("update"),y=i.includes("changetracking"),f=t.advancedQueryCapabilities;return u&&!(l||p||c)&&(l=p=c=!0),{supportsCalculate:s(t,"supportsCalculate",!1),supportsTruncate:s(t,"supportsTruncate",!1),supportsValidateSql:s(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:p,supportsEditing:u,supportsChangeTracking:y,supportsQuery:a,supportsQueryAnalytics:s(f,"supportsQueryAnalytic",!1),supportsQueryAttachments:s(f,"supportsQueryAttachments",!1),supportsQueryTopFeatures:s(f,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:s(t,"supportsAttachmentsResizing",!1),supportsSync:i.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:s(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:s(t,"supportsAsyncConvert3D",!1)}}function m(e,t){var r,o=e.advancedQueryCapabilities,u=e.ownershipBasedAccessControlForFeatures,c=e.archivingInfo,y=e.currentVersion,f=!(null===t||void 0===t?void 0:t.includes("MapServer"))||y>=(0,i.Z)("mapserver-pbf-version-support"),d=(0,n.M8)(t),h=new Set((null!==(r=e.supportedQueryFormats)&&void 0!==r?r:"").split(",").map((function(e){return e.toLowerCase().trim()})));return{supportsStatistics:s(o,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:s(o,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:s(o,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:l(o),supportsCentroid:s(o,"supportsReturningGeometryCentroid",!1),supportsDistance:s(o,"supportsQueryWithDistance",!1),supportsDistinct:s(o,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:s(o,"supportsReturningQueryExtent",!1),supportsGeometryProperties:s(o,"supportsReturningGeometryProperties",!1),supportsHavingClause:s(o,"supportsHavingClause",!1),supportsOrderBy:s(o,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:s(o,"supportsPagination",!1),supportsQuantization:s(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:s(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:s(e,"supportsReturningQueryGeometry",!1),supportsResultType:s(o,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:s(o,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:s(o,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:s(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:s(o,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:s(u,"allowOthersToQuery",!0),supportsHistoricMoment:s(c,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:f&&h.has("pbf"),supportsDisjointSpatialRelationship:s(o,"supportsDisjointSpatialRel",!1),supportsCacheHint:s(o,"supportsQueryWithCacheHint",!1)||p(o,"query"),supportsDefaultSpatialReference:s(o,"supportsDefaultSR",!1),supportsCompactGeometry:d,supportsFullTextSearch:s(o,"supportsFullTextSearch",!1),maxRecordCountFactor:a(e,"maxRecordCountFactor",void 0),maxRecordCount:a(e,"maxRecordCount",void 0),standardMaxRecordCount:a(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:a(e,"tileMaxRecordCount",void 0)}}function g(e){var t=e.advancedQueryCapabilities,r=s(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:s(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p(t,"queryRelated")}}function _(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function b(e){var t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:s(e,"allowGeometryUpdates",!0),supportsGlobalId:s(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:s(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:s(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:s(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:s(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:s(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:s(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:s(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:s(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:s(r,"supportsAsyncApplyEdits",!1)}}},68620:function(e,t,r){r.d(t,{p:function(){return o}});var i=r(37762),n=r(93501);function o(e,t,r){if(r&&r.features&&r.hasZ){var o=(0,n.k)(r.geometryType,t,e.outSpatialReference);if(null!=o){var s,a=(0,i.Z)(r.features);try{for(a.s();!(s=a.n()).done;){o(s.value.geometry)}}catch(u){a.e(u)}finally{a.f()}}}}},49818:function(e,t,r){r.d(t,{Z:function(){return k}});var i,n=r(29439),o=r(37762),s=r(15671),a=r(43144),u=r(60136),l=r(29388),p=r(27366),c=r(59486),y=r(52639),f=r(43404),d=r(46784),h=r(84652),v=r(49861),m=(r(25243),r(38511)),g=r(69912),_=r(31201),b=r(78952),S=r(77981),Z=r(83040),x=new f.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),w=i=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e)).displayFieldName=null,i.exceededTransferLimit=!1,i.features=[],i.fields=null,i.geometryType=null,i.hasM=!1,i.hasZ=!1,i.queryGeometry=null,i.spatialReference=null,i}return(0,a.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=b.Z.fromJSON(t.spatialReference),i=[],n=0;n<e.length;n++){var o=e[n],s=y.Z.fromJSON(o),a=o.geometry&&o.geometry.spatialReference;null==s.geometry||a||(s.geometry.spatialReference=r);var u=o.aggregateGeometries,l=s.aggregateGeometries;if(u&&null!=l)for(var p in l){var c=l[p],f=u[p],d=null===f||void 0===f?void 0:f.spatialReference;null==c||d||(c.spatialReference=r)}i.push(s)}return i}},{key:"writeGeometryType",value:function(e,t,r,i){if(e)x.write(e,t,r,i);else{var n=this.features;if(n){var s,a=(0,o.Z)(n);try{for(a.s();!(s=a.n()).done;){var u=s.value;if(u&&null!=u.geometry)return void x.write(u.geometry.type,t,r,i)}}catch(l){a.e(l)}finally{a.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,i=(0,S.im)(e);return i&&!r&&t.spatialReference&&(i.spatialReference=b.Z.fromJSON(t.spatialReference)),i}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var i,n=(0,o.Z)(r);try{for(n.s();!(i=n.n()).done;){var s=i.value;if(s&&null!=s.geometry&&s.geometry.spatialReference)return void(t.spatialReference=s.geometry.spatialReference.toJSON())}}catch(a){n.e(a)}finally{n.f()}}}}},{key:"clone",value:function(){return new i(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,h.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var i=t.features[r];if(i.geometry){var n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,n.Z)(e.scale,2),r=t[0],i=t[1],o=(0,n.Z)(e.translate,2),s=o[0],a=o[1],u=this.features,l=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-s)/r)}),(function(e){return Math.round((a-e)/i)})),p=0,c=u.length;p<c;p++)(null===l||void 0===l?void 0:l(u[p].geometry))||(u.splice(p,1),p--,c--);return this.transform=e,this}},{key:"unquantize",value:function(){var e,t,r=this.geometryType,i=this.features,s=this.transform;if(!s)return this;var a=(0,n.Z)(s.translate,2),u=a[0],l=a[1],p=(0,n.Z)(s.scale,2),c=p[0],y=p[1],f=null,d=null;if(this.hasZ&&null!=(null===s||void 0===s||null===(e=s.scale)||void 0===e?void 0:e[2])){var h=(0,n.Z)(s.translate,3)[2],v=(0,n.Z)(s.scale,3)[2];f=function(e){return e*v+h}}if(this.hasM&&null!=(null===s||void 0===s||null===(t=s.scale)||void 0===t?void 0:t[3])){var m=(0,n.Z)(s.translate,4)[3],g=(0,n.Z)(s.scale,4)[3];d=function(e){return null==e?e:e*g+m}}var _,b=this._getHydrationFunction(r,(function(e){return e*c+u}),(function(e){return l-e*y}),f,d),S=(0,o.Z)(i);try{for(S.s();!(_=S.n()).done;){var Z=_.value.geometry;null!=Z&&b&&b(Z)}}catch(x){S.e(x)}finally{S.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var i,n,o=[],s=0,a=e.length;s<a;s++){var u=e[s];if(s>0){var l=t(u[0]),p=r(u[1]);l===i&&p===n||(o.push([l-i,p-n]),i=l,n=p)}else i=t(u[0]),n=r(u[1]),o.push([i,n])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var i=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var n=(0,S.oU)(e)?e.rings:e.paths,o=[],s=0,a=n.length;s<a;s++){var u=n[s],l=i._quantizePoints(u,t,r);l&&o.push(l)}return o.length>0?((0,S.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var n=i._quantizePoints(e.points,t,r);return n&&n.length>0?(e.points=n,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r,i,n){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y),i&&(e.z=i(e.z))}:"polyline"===e||"polygon"===e?function(e){for(var o,s,a=(0,S.oU)(e)?e.rings:e.paths,u=0,l=a.length;u<l;u++)for(var p=a[u],c=0,y=p.length;c<y;c++){var f=p[c];c>0?(o+=f[0],s+=f[1]):(o=f[0],s=f[1]),f[0]=t(o),f[1]=r(s)}if(i&&n)for(var d=0,h=a.length;d<h;d++)for(var v=a[d],m=0,g=v.length;m<g;m++){var _=v[m];_[2]=i(_[2]),_[3]=n(_[3])}else if(i)for(var b=0,Z=a.length;b<Z;b++)for(var x=a[b],w=0,k=x.length;w<k;w++){var C=x[w];C[2]=i(C[2])}else if(n)for(var z=0,R=a.length;z<R;z++)for(var O=a[z],F=0,M=O.length;F<M;F++){var L=O[F];L[2]=n(L[2])}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),i&&null!=e.zmax&&null!=e.zmin&&(e.zmax=i(e.zmax),e.zmin=i(e.zmin)),n&&null!=e.mmax&&null!=e.mmin&&(e.mmax=n(e.mmax),e.mmin=n(e.mmin))}:"multipoint"===e?function(e){for(var o,s,a=e.points,u=0,l=a.length;u<l;u++){var p=a[u];u>0?(o+=p[0],s+=p[1]):(o=p[0],s=p[1]),p[0]=t(o),p[1]=r(s)}if(i&&n)for(var c=0,y=a.length;c<y;c++){var f=a[c];f[2]=i(f[2]),f[3]=n(f[3])}else if(i)for(var d=0,h=a.length;d<h;d++){var v=a[d];v[2]=i(v[2])}else if(n)for(var m=0,g=a.length;m<g;m++){var _=a[m];_[2]=n(_[2])}}:null}}]),r}(d.wq);(0,p._)([(0,v.Cb)({type:String,json:{write:!0}})],w.prototype,"displayFieldName",void 0),(0,p._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],w.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,v.Cb)({type:[y.Z],json:{write:!0}})],w.prototype,"features",void 0),(0,p._)([(0,m.r)("features")],w.prototype,"readFeatures",null),(0,p._)([(0,v.Cb)({type:[Z.Z],json:{write:!0}})],w.prototype,"fields",void 0),(0,p._)([(0,v.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:x.read}}})],w.prototype,"geometryType",void 0),(0,p._)([(0,_.c)("geometryType")],w.prototype,"writeGeometryType",null),(0,p._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],w.prototype,"hasM",void 0),(0,p._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],w.prototype,"hasZ",void 0),(0,p._)([(0,v.Cb)({types:c.qM,json:{write:!0}})],w.prototype,"queryGeometry",void 0),(0,p._)([(0,m.r)("queryGeometry")],w.prototype,"readQueryGeometry",null),(0,p._)([(0,v.Cb)({type:b.Z,json:{write:!0}})],w.prototype,"spatialReference",void 0),(0,p._)([(0,_.c)("spatialReference")],w.prototype,"writeSpatialReference",null),(0,p._)([(0,v.Cb)({json:{write:!0}})],w.prototype,"transform",void 0),(w=i=(0,p._)([(0,g.j)("esri.rest.support.FeatureSet")],w)).prototype.toJSON.isDefaultToJSON=!0;var k=w}}]);
//# sourceMappingURL=5981.9c896099.chunk.js.map