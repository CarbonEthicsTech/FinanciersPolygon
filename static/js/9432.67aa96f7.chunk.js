"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[9432,2410],{16054:function(e,t,i){i.d(t,{z:function(){return o}});var r=i(15671),n=i(43144),s=i(18759),o=function(){function e(t,i){(0,r.Z)(this,e),this._storage=new s.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),i&&this._storage.registerRemoveFunc("",i)}return(0,n.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,i,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,i){i.d(t,{WJ:function(){return d},Xq:function(){return c}});var r,n,s=i(29439),o=i(37762),a=i(15671),l=i(43144),u=i(27546);(n=r||(r={}))[n.ALL=0]="ALL",n[n.SOME=1]="SOME";var c=function(){function e(t,i,r){(0,a.Z)(this,e),this.name=t,this._storage=i,this.id=h+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),r&&(this._storage.registerRemoveFunc(this.id,r),this._removeFunc=!0)}return(0,l.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,i,r)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,i){this._storage.updateSize(this,e,t,i)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,a.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new u.Z,this._users=new u.Z}return(0,l.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,i,n,s){t=e.id+t;var o=this._db.get(t);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(t),o.entry!==i&&this._notifyRemove(t,o.entry,r.ALL)),n>this._maxSize)this._notifyRemove(t,i,r.ALL);else if(void 0!==i)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var a=1+Math.max(s,-3)- -3;this._db.set(t,{entry:i,size:n,lifetime:a,lives:a}),this._size+=n,e.size+=n,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,i,n){t=e.id+t;var s=this._db.get(t);if(s&&s.entry===i){for(this._size-=s.size,e.size-=s.size;n>this._maxSize;){var o=this._notifyRemove(t,i,r.SOME);if(!(null!=o&&o>0))return void this._db.delete(t);n=o}s.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var i=this._db.get(t);if(i)return this._size-=i.size,e.size-=i.size,this._db.delete(t),++this._hit,i.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var i=this._db.get(t);if(void 0!==i)return this._db.delete(t),i.lives=i.lifetime,this._db.set(t,i),++this._hit,i.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},i={},r=new Array;this._db.forEach((function(t,n){var s=t.lifetime;r[s]=(r[s]||0)+t.size,e._users.forAll((function(e){var r=e.id,s=e.name;if(n.startsWith(r)){var o=i[s]||0;i[s]=o+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var r=i[t]||0;i[t]=r,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var s=Object.keys(i);s.sort((function(e,t){return i[t]-i[e]})),s.forEach((function(e){return t[e]=Math.round(i[e]/Math.pow(2,20))+"MB / "+n[e]}));for(var o=r.length-1;o>=0;--o){var a=r[o];a&&(t["Priority "+(o+-3-1)]=Math.round(a/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,i=e.id;this._db.forEach((function(e,n){n.startsWith(i)&&(t._size-=e.size,t._db.delete(n),t._notifyRemove(n,e.entry,r.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,i){return e._notifyRemove(i,t.entry,r.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,i){var r;return this._removeFuncs.some((function(n){if(e.startsWith(n[0])){var s=n[1](t,i);return"number"==typeof s&&(r=s),!0}return!1})),r}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,i=(0,o.Z)(this._db);try{for(i.s();!(t=i.n()).done;){var r=(0,s.Z)(t.value,2),n=r[0],a=r[1];if(this._purgeItem(n,a),this._size<=.9*this.maxSize)return}}catch(l){i.e(l)}finally{i.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var i,r=(0,o.Z)(e._db);try{for(r.s();!(i=r.n()).done;){var n=(0,s.Z)(i.value,2),a=n[0],u=n[1];if(a.startsWith(t.id)&&(e._purgeItem(a,u,t),t.size<=.9*t.maxSize))return}}catch(l){r.e(l)}finally{r.f()}}}))}},{key:"_purgeItem",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,i&&(i.size-=t.size);var n=this._notifyRemove(e,t.entry,r.SOME);null!=n&&n>0&&(this._size+=n,i&&(i.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),h=0},2668:function(e,t,i){i.r(t),i.d(t,{default:function(){return se}});var r,n=i(74165),s=i(29439),o=i(15861),a=i(1413),l=i(15671),u=i(43144),c=i(11752),d=i(61120),h=i(60136),f=i(29388),p=i(27366),v=(i(59486),i(44055)),y=(i(94931),i(78451),i(98689),i(57823),i(32066),i(30505),i(34999),i(28189),i(9014)),m=i(40464),_=i(76200),g=i(10064),b=i(42537),w=i(32718),k=i(97642),S=i(66978),Z=i(49861),z=i(25243),C=(i(63780),i(93169),i(38511)),I=i(69912),F=i(27823),x=i(30651),R=i(11936),j=i(6693),M=i(46671),T=i(7632),L=i(64390),N=i(6061),A=i(29598),D=i(71684),E=i(56811),O=i(99063),P=i(45948),q=i(62594),H=i(83040),U=i(25610),W=i(37270),G=i(77748),J=i(85116),B=i(46784),Q=r=function(e){(0,h.Z)(i,e);var t=(0,f.Z)(i);function i(){var e;return(0,l.Z)(this,i),(e=t.apply(this,arguments)).age=null,e.ageReceived=null,e.displayCount=null,e.maxObservations=1,e}return(0,u.Z)(i,[{key:"clone",value:function(){return new r({age:this.age,ageReceived:this.ageReceived,displayCount:this.displayCount,maxObservations:this.maxObservations})}}]),i}(B.wq);(0,p._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Q.prototype,"age",void 0),(0,p._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Q.prototype,"ageReceived",void 0),(0,p._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Q.prototype,"displayCount",void 0),(0,p._)([(0,Z.Cb)({type:Number,json:{write:!0}})],Q.prototype,"maxObservations",void 0);var V=Q=r=(0,p._)([(0,I.j)("esri.layers.support.PurgeOptions")],Q),Y=i(21371),X=i(21149),K=i(81085),$=i(64575),ee=i(78952),te=i(53866),ie=(0,U.v)();function re(e,t){return new g.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}var ne=function(e){(0,h.Z)(r,e);var t=(0,f.Z)(r);function r(){var e;(0,l.Z)(this,r);for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).copyright=null,e.definitionExpression=null,e.displayField=null,e.elevationInfo=null,e.fields=null,e.fieldsIndex=null,e.geometryDefinition=null,e.geometryType=null,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.maxReconnectionAttempts=0,e.maxReconnectionInterval=20,e.maxScale=0,e.minScale=0,e.objectIdField=null,e.operationalLayerType="ArcGISStreamLayer",e.popupEnabled=!0,e.popupTemplate=null,e.purgeOptions=new V,e.refreshInterval=0,e.screenSizePerspectiveEnabled=!0,e.sourceJSON=null,e.spatialReference=ee.Z.WGS84,e.type="stream",e.url=null,e.updateInterval=300,e.useViewTime=!0,e.webSocketUrl=null,e}return(0,u.Z)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,a.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this;if(!("WebSocket"in globalThis))return this.addResolvingPromise(Promise.reject(new g.Z("stream-layer:websocket-unsupported","WebSocket is not supported in this browser. StreamLayer will not have real-time connection with the stream service."))),Promise.resolve(this);var i=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Stream Service","Feed"]},e).catch(S.r9).then((function(){return t._fetchService(i)}))),Promise.resolve(this)}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"featureReduction",set:function(e){var t=this._normalizeFeatureReduction(e);this._set("featureReduction",t)}},{key:"renderer",set:function(e){(0,W.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,i){var r,n=null===(r=(t=t.layerDefinition||t).drawingInfo)||void 0===r?void 0:r.renderer;if(n){var s=(0,y.a)(n,t,i)||void 0;return s||w.Z.getLogger(this).error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:i}),s}return(0,q.Ob)(t,i)}},{key:"connect",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r,o,a,l,u,c,d,h,f,p,v,y,m,_,g,w,k,S,Z;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Promise.all([i.e(7607),i.e(7463),i.e(1806)]).then(i.bind(i,97463)),this.load()]);case 2:return r=e.sent,o=(0,s.Z)(r,1),a=o[0].createConnection,l=this.geometryType?F.M.toJSON(this.geometryType):null,u=t||this.createConnectionParameters(),c=u.customParameters,d=void 0===c?null:c,h=u.definitionExpression,f=void 0===h?null:h,p=u.geometryDefinition,v=void 0===p?null:p,y=u.maxReconnectionAttempts,m=void 0===y?0:y,_=u.maxReconnectionInterval,g=void 0===_?20:_,w=u.spatialReference,k=void 0===w?this.spatialReference:w,S=a(this.parsedUrl,this.spatialReference,k,l,{geometry:v,where:f},m,g,null!==d&&void 0!==d?d:void 0),Z=(0,b.AL)([this.on("send-message-to-socket",(function(e){return S.sendMessageToSocket(e)})),this.on("send-message-to-client",(function(e){return S.sendMessageToClient(e)}))]),e.abrupt("return",(S.once("destroy",Z.remove),S));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createConnectionParameters",value:function(){return{spatialReference:this.spatialReference,customParameters:this.customParameters,definitionExpression:this.definitionExpression,geometryDefinition:this.geometryDefinition,maxReconnectionAttempts:this.maxReconnectionAttempts,maxReconnectionInterval:this.maxReconnectionInterval}}},{key:"createPopupTemplate",value:function(e){return(0,K.eZ)(this,e)}},{key:"createQuery",value:function(){var e=new X.Z;return e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1",e}},{key:"getFieldDomain",value:function(e,t){if(!this.fields)return null;var i=null;return this.fields.some((function(t){return t.name===e&&(i=t.domain),!!i})),i}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"serviceSupportsSpatialReference",value:function(e){return!0}},{key:"sendMessageToSocket",value:function(e){this.emit("send-message-to-socket",e)}},{key:"sendMessageToClient",value:function(e){this.emit("send-message-to-client",e)}},{key:"write",value:function(e,t){var i=null===t||void 0===t?void 0:t.messages;return this.webSocketUrl?(null!==i&&void 0!==i&&i.push(re(this,"using a custom websocket connection cannot be written to web scenes and web maps")),null):this.parsedUrl?(0,c.Z)((0,d.Z)(r.prototype),"write",this).call(this,e,t):(null!==i&&void 0!==i&&i.push(re(this,"using a client-side only connection without a url cannot be written to web scenes and web maps")),null)}},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var i,r,s,o,l,u,c=this;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.webSocketUrl||!this.parsedUrl){e.next=9;break}if(this.sourceJSON){e.next=7;break}return e.next=4,(0,_.default)(this.parsedUrl.path,{query:(0,a.Z)((0,a.Z)({f:"json"},this.customParameters),this.parsedUrl.query),responseType:"json",signal:t});case 4:r=e.sent,s=r.data,this.sourceJSON=s;case 7:e.next=21;break;case 9:if(null!==(o=this.timeInfo)&&void 0!==o&&o.trackIdField){e.next=11;break}throw new g.Z("stream-layer:missing-metadata","The stream layer trackIdField must be specified.");case 11:if(this.objectIdField){e.next=16;break}if(u=null===(l=this.fields.find((function(e){return"oid"===e.type})))||void 0===l?void 0:l.name,u){e.next=15;break}throw new g.Z("stream-layer:missing-metadata","The stream layer objectIdField must be specified.");case 15:this.objectIdField=u;case 16:if(this.fields){e.next=18;break}throw new g.Z("stream-layer:missing-metadata","The stream layer fields must be specified.");case 18:if(this.fields.some((function(e){return e.name===c.objectIdField}))||this.fields.push(new H.Z({name:this.objectIdField,alias:this.objectIdField,type:"oid"})),this.geometryType){e.next=20;break}throw new g.Z("stream-layer:missing-metadata","The stream layer geometryType must be specified.");case 20:this.webSocketUrl&&(this.url=this.webSocketUrl);case 21:return e.abrupt("return",(this.read(this.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:null===(i=this.portalItem)||void 0===i?void 0:i.portal,url:this.parsedUrl}),(0,W.YN)(this.renderer,this.fieldsIndex),(0,W.UF)(this.timeInfo,this.fieldsIndex),this.objectIdField||(this.objectIdField="__esri_stream_id__"),(0,Y.y)(this,{origin:"service"})));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,L.M)((0,T.b)((0,j.h)((0,O.n)((0,E.M)((0,D.Q)((0,R.Y)((0,N.q)((0,A.I)((0,k.R)((0,M.N)(x.Z))))))))))));(0,p._)([(0,Z.Cb)({type:String})],ne.prototype,"copyright",void 0),(0,p._)([(0,Z.Cb)({readOnly:!0})],ne.prototype,"defaultPopupTemplate",null),(0,p._)([(0,Z.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ne.prototype,"definitionExpression",void 0),(0,p._)([(0,Z.Cb)({type:String})],ne.prototype,"displayField",void 0),(0,p._)([(0,Z.Cb)({type:$.Z})],ne.prototype,"elevationInfo",void 0),(0,p._)([(0,Z.Cb)({json:{origins:{"web-map":{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],ne.prototype,"featureReduction",null),(0,p._)([(0,Z.Cb)(ie.fields)],ne.prototype,"fields",void 0),(0,p._)([(0,Z.Cb)(ie.fieldsIndex)],ne.prototype,"fieldsIndex",void 0),(0,p._)([(0,Z.Cb)({type:te.Z,json:{name:"layerDefinition.definitionGeometry",write:!0}})],ne.prototype,"geometryDefinition",void 0),(0,p._)([(0,Z.Cb)({type:F.M.apiValues,json:{read:{reader:F.M.read}}})],ne.prototype,"geometryType",void 0),(0,p._)([(0,Z.Cb)(P.iR)],ne.prototype,"labelsVisible",void 0),(0,p._)([(0,Z.Cb)({type:[G.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:J.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],ne.prototype,"labelingInfo",void 0),(0,p._)([(0,Z.Cb)(P.rn)],ne.prototype,"legendEnabled",void 0),(0,p._)([(0,Z.Cb)({type:["show","hide"]})],ne.prototype,"listMode",void 0),(0,p._)([(0,Z.Cb)({type:z.z8})],ne.prototype,"maxReconnectionAttempts",void 0),(0,p._)([(0,Z.Cb)({type:z.z8})],ne.prototype,"maxReconnectionInterval",void 0),(0,p._)([(0,Z.Cb)(P.u1)],ne.prototype,"maxScale",void 0),(0,p._)([(0,Z.Cb)(P.rO)],ne.prototype,"minScale",void 0),(0,p._)([(0,Z.Cb)({type:String})],ne.prototype,"objectIdField",void 0),(0,p._)([(0,Z.Cb)({value:"ArcGISStreamLayer",type:["ArcGISStreamLayer"]})],ne.prototype,"operationalLayerType",void 0),(0,p._)([(0,Z.Cb)(P.C_)],ne.prototype,"popupEnabled",void 0),(0,p._)([(0,Z.Cb)({type:v.Z,json:{name:"popupInfo",write:!0}})],ne.prototype,"popupTemplate",void 0),(0,p._)([(0,Z.Cb)({type:V})],ne.prototype,"purgeOptions",void 0),(0,p._)([(0,Z.Cb)({json:{read:!1,write:!1}})],ne.prototype,"refreshInterval",void 0),(0,p._)([(0,Z.Cb)({types:m.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{name:"layerDefinition.drawingInfo.renderer",types:m.o,write:!0}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],ne.prototype,"renderer",null),(0,p._)([(0,C.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,C.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],ne.prototype,"readRenderer",null),(0,p._)([(0,Z.Cb)(P.YI)],ne.prototype,"screenSizePerspectiveEnabled",void 0),(0,p._)([(0,Z.Cb)()],ne.prototype,"sourceJSON",void 0),(0,p._)([(0,Z.Cb)({type:ee.Z,json:{origins:{service:{read:{source:"spatialReference"}}}}})],ne.prototype,"spatialReference",void 0),(0,p._)([(0,Z.Cb)({json:{read:!1}})],ne.prototype,"type",void 0),(0,p._)([(0,Z.Cb)(P.HQ)],ne.prototype,"url",void 0),(0,p._)([(0,Z.Cb)({type:Number})],ne.prototype,"updateInterval",void 0),(0,p._)([(0,Z.Cb)({json:{read:!1,write:!1}})],ne.prototype,"useViewTime",void 0),(0,p._)([(0,Z.Cb)({type:String})],ne.prototype,"webSocketUrl",void 0);var se=ne=(0,p._)([(0,I.j)("esri.layers.StreamLayer")],ne)},11936:function(e,t,i){i.d(t,{Y:function(){return h}});var r=i(15671),n=i(43144),s=i(60136),o=i(29388),a=i(27366),l=i(32718),u=i(49861),c=(i(25243),i(63780),i(93169),i(69912)),d=i(25899),h=function(e){var t=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,n.Z)(i,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,d.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,d.Nm)(e,l.Z.getLogger(this)))}}]),i}(e);return(0,a._)([(0,u.Cb)()],t.prototype,"title",null),(0,a._)([(0,u.Cb)({type:String})],t.prototype,"url",null),t=(0,a._)([(0,c.j)("esri.layers.mixins.ArcGISService")],t)}},46671:function(e,t,i){i.d(t,{N:function(){return c}});var r=i(43144),n=i(15671),s=i(60136),o=i(29388),a=i(27366),l=i(49861),u=(i(25243),i(63780),i(93169),i(69912)),c=function(e){var t=function(e){(0,s.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,n.Z)(this,i),(e=t.apply(this,arguments)).customParameters=null,e}return(0,r.Z)(i)}(e);return(0,a._)([(0,l.Cb)({type:Object,json:{write:{overridePolicy:function(e){return{enabled:!!(e&&Object.keys(e).length>0)}}}}})],t.prototype,"customParameters",void 0),t=(0,a._)([(0,u.j)("esri.layers.mixins.CustomParametersMixin")],t)}},71684:function(e,t,i){i.d(t,{Q:function(){return z}});var r=i(74165),n=i(15861),s=i(15671),o=i(43144),a=i(97326),l=i(60136),u=i(29388),c=i(27366),d=i(32718),h=i(66978),f=i(49861),p=(i(25243),i(63780),i(93169),i(69912)),v=i(37762),y=i(40281),m=(i(10064),i(2173),i(27088)),_=new y.Z,g=new WeakMap;function b(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function w(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:w(t,e%t):0}var k=0,S=0;function Z(){var e,t=Date.now(),i=(0,v.Z)(_);try{for(i.s();!(e=i.n()).done;){var r,n=e.value;if(n.refreshInterval)t-(null!==(r=g.get(n))&&void 0!==r?r:0)+5>=6e4*n.refreshInterval&&(g.set(n,t),n.refresh(t))}}catch(s){i.e(s)}finally{i.f()}}(0,m.EH)((function(){var e,t=Date.now(),i=0,r=(0,v.Z)(_);try{for(r.s();!(e=r.n()).done;){var n=e.value;i=w(Math.round(6e4*n.refreshInterval),i),n.refreshInterval?g.get(n)||g.set(n,t):g.delete(n)}}catch(s){r.e(s)}finally{r.f()}if(i!==S){if(S=i,clearInterval(k),0===S)return void(k=0);k=setInterval(Z,S)}}));var z=function(e){var t=function(e){(0,l.Z)(i,e);var t=(0,u.Z)(i);function i(){var e;(0,s.Z)(this,i);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=(0,h.Ds)((function(){return e.hasDataChanged()})),e.when().then((function(){e.destroyed||function(e){b(e)&&_.push(e)}((0,a.Z)(e))}),(function(){})),e}return(0,o.Z)(i,[{key:"destroy",value:function(){!function(e){b(e)&&_.includes(e)&&_.remove(e)}(this)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,h.R8)(this._debounceHasDataChanged()).then((function(i){i&&e._set("refreshTimestamp",t),e.emit("refresh",{dataChanged:i})}),(function(t){d.Z.getLogger(e).error(t),e.emit("refresh",{dataChanged:!1,error:t})}))}},{key:"hasDataChanged",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),i}(e);return(0,c._)([(0,f.Cb)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0}})],t.prototype,"refreshInterval",void 0),(0,c._)([(0,f.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,c._)([(0,f.Cb)()],t.prototype,"refreshParameters",null),t=(0,c._)([(0,p.j)("esri.layers.mixins.RefreshableLayer")],t),t}},52410:function(e,t,i){i.d(t,{Z:function(){return c}});var r=i(37762),n=i(15671),s=i(43144),o=i(37270);function a(e){return"date"===e.type||"esriFieldTypeDate"===e.type||"date-only"===e.type||"esriFieldTypeDateOnly"===e.type||"timestamp-offset"===e.type||"esriFieldTypeTimestampOffset"===e.type}function l(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function u(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,n.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var i,s=[],c=(0,r.Z)(t);try{for(c.s();!(i=c.n()).done;){var f=i.value,p=null===f||void 0===f?void 0:f.name,v=h(null===f||void 0===f?void 0:f.name);if(p&&v){var y=d(p);this._fieldsMap.set(p,f),this._fieldsMap.set(y,f),this._normalizedFieldsMap.set(v,f),s.push(y),a(f)?(this.dateFields.push(f),this._dateFieldsSet.add(f)):(0,o.H7)(f)&&(this._numericFieldsSet.add(f),this.numericFields.push(f)),l(f)||u(f)||(f.editable=null==f.editable||!!f.editable,f.nullable=null==f.nullable||!!f.nullable)}}}catch(m){c.e(m)}finally{c.f()}s.sort(),this.uid=s.join(",")}}return(0,s.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,r.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var i=e.value;l(i)||u(i)||i.nullable||void 0!==(0,o.os)(i)||this._requiredFields.push(i)}}catch(n){t.e(n)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var i=this._fieldsMap.get(e);return i||((i=null!==(t=this._fieldsMap.get(d(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(h(e)))&&this._fieldsMap.set(e,i),i)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,i=this.get(e);if(i)return null!==(t=i.name)&&void 0!==t?t:void 0}}]),e}();function d(e){return e.trim().toLowerCase()}function h(e){var t,i;return null!==(t=null===(i=(0,o.q6)(e))||void 0===i?void 0:i.toLowerCase())&&void 0!==t?t:""}},85116:function(e,t,i){i.d(t,{a:function(){return d},r:function(){return u}});var r=i(10064),n=i(84652),s=i(32718),o=i(77748),a=s.Z.getLogger("esri.layers.support.labelingInfo"),l=/\[([^\[\]]+)\]/gi;function u(e,t,i){var r=this;return e?e.map((function(e){var n=new o.Z;if(n.read(e,i),n.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||r.fields;n.labelExpression=n.labelExpression.replaceAll(l,(function(e,t){return"[".concat(function(e,t){if(!t)return e;for(var i=e.toLowerCase(),r=0;r<t.length;r++){var n=t[r].name;if(n.toLowerCase()===i)return n}return e}(t,s),"]")}))}return n})):null}var c={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null};function d(e,t){var i=(0,n.d9)(e);return i.some((function(e){return function(e,t){var i=e.labelPlacement,n=c[t];if(!e.symbol)return a.warn("No ILabelClass symbol specified."),!0;if(!n)return a.error(new r.Z("labeling:unsupported-geometry-type","Unable to create labels for layer, geometry type '".concat(t,"' is not supported"))),!0;if(!n.includes(i)){var s=n[0];i&&a.warn("Found invalid label placement type ".concat(i," for ").concat(t,". Defaulting to ").concat(s)),e.labelPlacement=s}return!1}(e,t)}))?[]:i}},21371:function(e,t,i){i.d(t,{y:function(){return l}});var r=i(74165),n=i(15861),s=i(14921),o=i(66978),a=i(51370);function l(e,t,i){return u.apply(this,arguments)}function u(){return u=(0,n.Z)((0,r.Z)().mark((function e(t,i,n){var l,u,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l=t&&t.getAtOrigin&&t.getAtOrigin("renderer",i.origin))||"unique-value"!==l.type||!l.styleOrigin){e.next=6;break}return e.next=4,(0,s.q6)(l.populateFromStyle());case 4:u=e.sent,(0,o.k_)(n),!1===u.ok&&(c=u.error,i&&i.messages&&i.messages.push(new a.Z("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(c.message),{error:c,context:i})),t.clear("renderer",null===i||void 0===i?void 0:i.origin));case 6:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}},99837:function(e,t,i){i.d(t,{Z:function(){return y}});var r,n=i(15671),s=i(43144),o=i(60136),a=i(29388),l=i(27366),u=i(46784),c=i(84652),d=i(49861),h=i(25243),f=i(69912),p=i(31201),v=r=function(e){(0,o.Z)(i,e);var t=(0,a.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this,e)).attachmentTypes=null,r.attachmentsWhere=null,r.cacheHint=void 0,r.keywords=null,r.globalIds=null,r.name=null,r.num=null,r.objectIds=null,r.returnMetadata=!1,r.size=null,r.start=null,r.where=null,r}return(0,s.Z)(i,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new r((0,c.d9)({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,cacheHint:this.cacheHint,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}}]),i}(u.wq);(0,l._)([(0,d.Cb)({type:[String],json:{write:!0}})],v.prototype,"attachmentTypes",void 0),(0,l._)([(0,d.Cb)({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],v.prototype,"attachmentsWhere",void 0),(0,l._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],v.prototype,"cacheHint",void 0),(0,l._)([(0,d.Cb)({type:[String],json:{write:!0}})],v.prototype,"keywords",void 0),(0,l._)([(0,d.Cb)({type:[Number],json:{write:!0}})],v.prototype,"globalIds",void 0),(0,l._)([(0,d.Cb)({json:{write:!0}})],v.prototype,"name",void 0),(0,l._)([(0,d.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],v.prototype,"num",void 0),(0,l._)([(0,d.Cb)({type:[Number],json:{write:!0}})],v.prototype,"objectIds",void 0),(0,l._)([(0,d.Cb)({type:Boolean,json:{default:!1,write:!0}})],v.prototype,"returnMetadata",void 0),(0,l._)([(0,d.Cb)({type:[Number],json:{write:!0}})],v.prototype,"size",void 0),(0,l._)([(0,d.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],v.prototype,"start",void 0),(0,l._)([(0,p.c)("start"),(0,p.c)("num")],v.prototype,"writeStart",null),(0,l._)([(0,d.Cb)({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],v.prototype,"where",void 0),(v=r=(0,l._)([(0,f.j)("esri.rest.support.AttachmentQuery")],v)).from=(0,h.se)(v);var y=v},81085:function(e,t,i){i.d(t,{eZ:function(){return c}});var r=i(1413),n=i(44055),s=i(37270),o=i(26418),a=(i(23046),i(1374),i(39384),i(29230)),l=(i(29514),i(44051),i(98752),i(16698)),u=i(91738);function c(e,t){var i=e.displayField,r=e.editFieldsInfo,l=e.fields,u=e.objectIdField,c=e.title;if(!l)return null;var d=f({editFieldsInfo:r,fields:l,objectIdField:u},t);if(!d.length)return null;var h=function(e){var t=(0,s.O5)(e),i=e.titleBase;return t?"".concat(i,": {").concat(t.trim(),"}"):null!==i&&void 0!==i?i:""}({titleBase:c,fields:l,displayField:i}),p=[new a.Z,new o.Z];return new n.Z({title:h,content:p,fieldInfos:d})}var d=function(e,t){return t.visibleFieldNames?t.visibleFieldNames.has(e.name):(0,s.Fv)(e,t)};function h(e,t){return"oid"===e.type?-1:"oid"===t.type?1:v(e)?-1:v(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function f(e,t){var i,n=null===t||void 0===t?void 0:t.visibleFieldNames;return function(e,t){var i=e;return t&&(e=e.filter((function(e){return!t.includes(e.type)}))),e===i&&(e=e.slice()),e.sort(h),e}(null!==(i=e.fields)&&void 0!==i?i:[],(null===t||void 0===t?void 0:t.ignoreFieldTypes)||y).map((function(t){return new l.Z({fieldName:t.name,isEditable:(0,s.Hp)(t,e),label:t.alias,format:p(t),visible:d(t,(0,r.Z)((0,r.Z)({},e),{},{visibleFieldNames:n}))})}))}function p(e){switch(e.type){case"small-integer":case"integer":case"single":return new u.Z({digitSeparator:!0,places:0});case"double":return new u.Z({digitSeparator:!0,places:2});case"date":return new u.Z({dateFormat:"long-month-day-year"});default:return"string"===e.type&&(0,s.Ec)(e.name)?new u.Z({digitSeparator:!0,places:0}):null}}function v(e){return"name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase())}var y=["geometry","blob","raster","guid","xml"]}}]);
//# sourceMappingURL=9432.67aa96f7.chunk.js.map